(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[905],{3020:(e,t,s)=>{"use strict";s.d(t,{JF:()=>tp,sV:()=>N});let{ASTNode:i,BasicCursor:n,Block:o,BlockSvg:r,Blocks:l,COLLAPSED_FIELD_NAME:_,COLLAPSED_INPUT_NAME:u,COLLAPSE_CHARS:T,CodeGenerator:a,CollapsibleToolboxCategory:E,ComponentManager:c,Connection:d,ConnectionChecker:$,ConnectionDB:I,ConnectionType:O,ContextMenu:p,ContextMenuItems:m,ContextMenuRegistry:g,Css:L,Cursor:R,DELETE_VARIABLE_ID:h,DeleteArea:S,DragTarget:A,DropDownDiv:M,Events:N,Extensions:C,Field:b,FieldCheckbox:f,FieldDropdown:D,FieldImage:P,FieldLabel:U,FieldLabelSerializable:F,FieldNumber:v,FieldTextInput:B,FieldVariable:k,Flyout:y,FlyoutButton:H,FlyoutMetricsManager:G,Generator:x,Gesture:V,Grid:w,HorizontalFlyout:X,INPUT_VALUE:Y,Input:K,InsertionMarkerManager:W,InsertionMarkerPreviewer:j,Marker:q,MarkerManager:J,Menu:Q,MenuItem:z,MetricsManager:Z,Msg:ee,NEXT_STATEMENT:et,Names:es,OPPOSITE_TYPE:ei,OUTPUT_VALUE:en,Options:eo,PREVIOUS_STATEMENT:er,PROCEDURE_CATEGORY_NAME:el,Procedures:e_,RENAME_VARIABLE_ID:eu,RenderedConnection:eT,Scrollbar:ea,ScrollbarPair:eE,ShortcutItems:ec,ShortcutRegistry:ed,TOOLBOX_AT_BOTTOM:e$,TOOLBOX_AT_LEFT:eI,TOOLBOX_AT_RIGHT:eO,TOOLBOX_AT_TOP:ep,TabNavigateCursor:em,Theme:eg,ThemeManager:eL,Themes:eR,Toolbox:eh,ToolboxCategory:eS,ToolboxItem:eA,ToolboxSeparator:eM,Tooltip:eN,Touch:eC,Trashcan:eb,UnattachedFieldError:ef,VARIABLE_CATEGORY_NAME:eD,VARIABLE_DYNAMIC_CATEGORY_NAME:eP,VERSION:eU,VariableMap:eF,VariableModel:ev,Variables:eB,VariablesDynamic:ek,VerticalFlyout:ey,WidgetDiv:eH,Workspace:eG,WorkspaceAudio:ex,WorkspaceDragger:eV,WorkspaceSvg:ew,Xml:eX,ZoomControls:eY,blockAnimations:eK,blockRendering:eW,browserEvents:ej,bubbles:eq,bumpObjects:eJ,clipboard:eQ,comments:ez,common:eZ,config:e0,constants:e1,defineBlocksWithJsonArray:e2,dialog:e3,dragging:e8,fieldRegistry:e4,geras:e5,getMainWorkspace:e9,getSelected:e6,hasBubble:e7,hideChaff:te,icons:tt,inject:ts,inputs:ti,isCopyable:tn,isDeletable:to,isDraggable:tr,isIcon:tl,isObservable:t_,isPaster:tu,isRenderedElement:tT,isSelectable:ta,isSerializable:tE,isVariableBackedParameterModel:tc,layers:td,procedures:t$,registry:tI,renderManagement:tO,serialization:tp,setLocale:tm,setParentContainer:tg,svgResize:tL,thrasos:tR,uiPosition:th,utils:tS,zelos:tA}=s(1615)},3412:function(e,t){var s,i,n;i=[],void 0!==(n="function"==typeof(s=function(){"use strict";var e=e||{Msg:Object.create(null)};return e.Msg.ADD_COMMENT="Add Comment",e.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",e.Msg.CHANGE_VALUE_TITLE="Change value:",e.Msg.CLEAN_UP="Clean up Blocks",e.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",e.Msg.COLLAPSE_ALL="Collapse Blocks",e.Msg.COLLAPSE_BLOCK="Collapse Block",e.Msg.COLOUR_BLEND_COLOUR1="colour 1",e.Msg.COLOUR_BLEND_COLOUR2="colour 2",e.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",e.Msg.COLOUR_BLEND_RATIO="ratio",e.Msg.COLOUR_BLEND_TITLE="blend",e.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",e.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",e.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",e.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",e.Msg.COLOUR_RANDOM_TITLE="random colour",e.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",e.Msg.COLOUR_RGB_BLUE="blue",e.Msg.COLOUR_RGB_GREEN="green",e.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",e.Msg.COLOUR_RGB_RED="red",e.Msg.COLOUR_RGB_TITLE="colour with",e.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",e.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",e.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",e.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",e.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",e.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",e.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",e.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",e.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",e.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",e.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",e.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",e.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",e.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",e.Msg.CONTROLS_IF_MSG_ELSE="else",e.Msg.CONTROLS_IF_MSG_ELSEIF="else if",e.Msg.CONTROLS_IF_MSG_IF="if",e.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",e.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",e.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",e.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",e.Msg.CONTROLS_REPEAT_INPUT_DO="do",e.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",e.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",e.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",e.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",e.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",e.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",e.Msg.DELETE_BLOCK="Delete Block",e.Msg.DELETE_VARIABLE="Delete the '%1' variable",e.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",e.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",e.Msg.DIALOG_CANCEL="Cancel",e.Msg.DIALOG_OK="OK",e.Msg.DISABLE_BLOCK="Disable Block",e.Msg.DUPLICATE_BLOCK="Duplicate",e.Msg.DUPLICATE_COMMENT="Duplicate Comment",e.Msg.ENABLE_BLOCK="Enable Block",e.Msg.EXPAND_ALL="Expand Blocks",e.Msg.EXPAND_BLOCK="Expand Block",e.Msg.EXTERNAL_INPUTS="External Inputs",e.Msg.HELP="Help",e.Msg.INLINE_INPUTS="Inline Inputs",e.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",e.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",e.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",e.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",e.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",e.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",e.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",e.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",e.Msg.LISTS_GET_INDEX_FIRST="first",e.Msg.LISTS_GET_INDEX_FROM_END="# from end",e.Msg.LISTS_GET_INDEX_FROM_START="#",e.Msg.LISTS_GET_INDEX_GET="get",e.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",e.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",e.Msg.LISTS_GET_INDEX_LAST="last",e.Msg.LISTS_GET_INDEX_RANDOM="random",e.Msg.LISTS_GET_INDEX_REMOVE="remove",e.Msg.LISTS_GET_INDEX_TAIL="",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",e.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",e.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",e.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",e.Msg.LISTS_GET_SUBLIST_END_LAST="to last",e.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",e.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",e.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",e.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",e.Msg.LISTS_GET_SUBLIST_TAIL="",e.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",e.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",e.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",e.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",e.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",e.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",e.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",e.Msg.LISTS_INLIST="in list",e.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",e.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",e.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",e.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",e.Msg.LISTS_LENGTH_TITLE="length of %1",e.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",e.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",e.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",e.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",e.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",e.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",e.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",e.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",e.Msg.LISTS_SET_INDEX_INPUT_TO="as",e.Msg.LISTS_SET_INDEX_INSERT="insert at",e.Msg.LISTS_SET_INDEX_SET="set",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",e.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",e.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",e.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",e.Msg.LISTS_SORT_ORDER_DESCENDING="descending",e.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",e.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",e.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",e.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",e.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",e.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",e.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",e.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",e.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",e.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",e.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",e.Msg.LOGIC_BOOLEAN_FALSE="false",e.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",e.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",e.Msg.LOGIC_BOOLEAN_TRUE="true",e.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",e.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",e.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",e.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",e.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",e.Msg.LOGIC_NEGATE_TITLE="not %1",e.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",e.Msg.LOGIC_NULL="null",e.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",e.Msg.LOGIC_NULL_TOOLTIP="Returns null.",e.Msg.LOGIC_OPERATION_AND="and",e.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",e.Msg.LOGIC_OPERATION_OR="or",e.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",e.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",e.Msg.LOGIC_TERNARY_CONDITION="test",e.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",e.Msg.LOGIC_TERNARY_IF_FALSE="if false",e.Msg.LOGIC_TERNARY_IF_TRUE="if true",e.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",e.Msg.MATH_ADDITION_SYMBOL="+",e.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",e.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",e.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",e.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",e.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",e.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",e.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",e.Msg.MATH_CHANGE_TITLE="change %1 by %2",e.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",e.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",e.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: π (3.141…), e (2.718…), φ (1.618…), sqrt(2) (1.414…), sqrt(\xbd) (0.707…), or ∞ (infinity).",e.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",e.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",e.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",e.Msg.MATH_DIVISION_SYMBOL="\xf7",e.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",e.Msg.MATH_IS_EVEN="is even",e.Msg.MATH_IS_NEGATIVE="is negative",e.Msg.MATH_IS_ODD="is odd",e.Msg.MATH_IS_POSITIVE="is positive",e.Msg.MATH_IS_PRIME="is prime",e.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",e.Msg.MATH_IS_WHOLE="is whole",e.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",e.Msg.MATH_MODULO_TITLE="remainder of %1 \xf7 %2",e.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",e.Msg.MATH_MULTIPLICATION_SYMBOL="\xd7",e.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",e.Msg.MATH_NUMBER_TOOLTIP="A number.",e.Msg.MATH_ONLIST_HELPURL="",e.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",e.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",e.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",e.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",e.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",e.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",e.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",e.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",e.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",e.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",e.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",e.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",e.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",e.Msg.MATH_POWER_SYMBOL="^",e.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",e.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",e.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",e.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",e.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",e.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",e.Msg.MATH_ROUND_OPERATOR_ROUND="round",e.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",e.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",e.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",e.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",e.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",e.Msg.MATH_SINGLE_OP_ROOT="square root",e.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",e.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",e.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",e.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",e.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",e.Msg.MATH_SUBTRACTION_SYMBOL="-",e.Msg.MATH_TRIG_ACOS="acos",e.Msg.MATH_TRIG_ASIN="asin",e.Msg.MATH_TRIG_ATAN="atan",e.Msg.MATH_TRIG_COS="cos",e.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",e.Msg.MATH_TRIG_SIN="sin",e.Msg.MATH_TRIG_TAN="tan",e.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",e.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",e.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",e.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",e.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",e.Msg.NEW_NUMBER_VARIABLE="Create number variable...",e.Msg.NEW_STRING_VARIABLE="Create string variable...",e.Msg.NEW_VARIABLE="Create variable...",e.Msg.NEW_VARIABLE_TITLE="New variable name:",e.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",e.Msg.ORDINAL_NUMBER_SUFFIX="",e.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",e.Msg.PROCEDURES_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",e.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",e.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",e.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",e.Msg.PROCEDURES_CREATE_DO="Create '%1'",e.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",e.Msg.PROCEDURES_DEFNORETURN_DO="",e.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",e.Msg.PROCEDURES_DEFNORETURN_TITLE="to",e.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",e.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",e.Msg.PROCEDURES_DEFRETURN_RETURN="return",e.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",e.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",e.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",e.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",e.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",e.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",e.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",e.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",e.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",e.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",e.Msg.REDO="Redo",e.Msg.REMOVE_COMMENT="Remove Comment",e.Msg.RENAME_VARIABLE="Rename variable...",e.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",e.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_APPEND_TITLE="to %1 append text %2",e.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",e.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",e.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",e.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",e.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",e.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",e.Msg.TEXT_CHARAT_FIRST="get first letter",e.Msg.TEXT_CHARAT_FROM_END="get letter # from end",e.Msg.TEXT_CHARAT_FROM_START="get letter #",e.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",e.Msg.TEXT_CHARAT_LAST="get last letter",e.Msg.TEXT_CHARAT_RANDOM="get random letter",e.Msg.TEXT_CHARAT_TAIL="",e.Msg.TEXT_CHARAT_TITLE="in text %1 %2",e.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",e.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",e.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",e.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",e.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",e.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",e.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",e.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",e.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",e.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",e.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",e.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",e.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",e.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",e.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",e.Msg.TEXT_GET_SUBSTRING_TAIL="",e.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",e.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",e.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",e.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",e.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",e.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",e.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",e.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",e.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",e.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",e.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",e.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",e.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",e.Msg.TEXT_LENGTH_TITLE="length of %1",e.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",e.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",e.Msg.TEXT_PRINT_TITLE="print %1",e.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",e.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",e.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",e.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",e.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",e.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",e.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",e.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",e.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",e.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",e.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",e.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",e.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",e.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",e.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",e.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",e.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",e.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",e.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",e.Msg.TODAY="Today",e.Msg.UNDO="Undo",e.Msg.UNNAMED_KEY="unnamed",e.Msg.VARIABLES_DEFAULT_NAME="item",e.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",e.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",e.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",e.Msg.VARIABLES_SET="set %1 to %2",e.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",e.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",e.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",e.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",e.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",e.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",e.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",e.Msg.CONTROLS_FOREACH_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_FOR_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=e.Msg.CONTROLS_IF_MSG_ELSEIF,e.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=e.Msg.CONTROLS_IF_MSG_ELSE,e.Msg.CONTROLS_IF_IF_TITLE_IF=e.Msg.CONTROLS_IF_MSG_IF,e.Msg.CONTROLS_IF_MSG_THEN=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=e.Msg.CONTROLS_REPEAT_INPUT_DO,e.Msg.LISTS_CREATE_WITH_ITEM_TITLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=e.Msg.LISTS_INLIST,e.Msg.MATH_CHANGE_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.PROCEDURES_DEFRETURN_COMMENT=e.Msg.PROCEDURES_DEFNORETURN_COMMENT,e.Msg.PROCEDURES_DEFRETURN_DO=e.Msg.PROCEDURES_DEFNORETURN_DO,e.Msg.PROCEDURES_DEFRETURN_PROCEDURE=e.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,e.Msg.PROCEDURES_DEFRETURN_TITLE=e.Msg.PROCEDURES_DEFNORETURN_TITLE,e.Msg.TEXT_APPEND_VARIABLE=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=e.Msg.VARIABLES_DEFAULT_NAME,e.Msg.COLOUR_HUE="20",e.Msg.LISTS_HUE="260",e.Msg.LOGIC_HUE="210",e.Msg.LOOPS_HUE="120",e.Msg.MATH_HUE="230",e.Msg.PROCEDURES_HUE="290",e.Msg.TEXTS_HUE="160",e.Msg.VARIABLES_DYNAMIC_HUE="310",e.Msg.VARIABLES_HUE="330",e.Msg})?s.apply(t,i):s)&&(e.exports=n)},4501:function(e,t,s){var i;i=e=>(()=>{"use strict";var t={370:t=>{t.exports=e}},s={};function i(e){var n=s[e];if(void 0!==n)return n.exports;var o=s[e]={exports:{}};return t[e](o,o.exports,i),o.exports}i.d=(e,t)=>{for(var s in t)i.o(t,s)&&!i.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var n={};i.r(n),i.d(n,{blockIsDynamic:()=>r,decoratePreviewer:()=>l,finalizeConnections:()=>u,overrideOldBlockDefinitions:()=>_});var o=i(370);function r(e){return void 0!==e.onPendingConnection&&void 0!==e.finalizeConnections}function l(e){return class{constructor(t){this.pendingBlocks=new Set;let s=null!=e?e:o.InsertionMarkerPreviewer;this.basePreviewer=new s(t)}previewReplacement(e,t,s){this.previewDynamism(t),this.basePreviewer.previewReplacement(e,t,s)}previewConnection(e,t){this.previewDynamism(t),this.basePreviewer.previewConnection(e,t)}hidePreview(){this.basePreviewer.hidePreview()}dispose(){for(let e of this.pendingBlocks){if(e.isDeadOrDying())return;e.finalizeConnections()}this.pendingBlocks.clear(),this.basePreviewer.dispose()}previewDynamism(e){let t=e.getSourceBlock();r(t)&&(t.onPendingConnection(e),this.pendingBlocks.add(t))}}}o.Blocks.dynamic_if={minInputs:1,elseifCount:0,elseCount:0,init(){this.setHelpUrl(o.Msg.CONTROLS_IF_HELPURL),this.setStyle("logic_blocks"),this.addFirstCase(),this.setNextStatement(!0),this.setPreviousStatement(!0),this.setTooltip(o.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom(){if(this.isDeadOrDying()||(o.Events.disable(),this.finalizeConnections(),this instanceof o.BlockSvg&&this.initSvg(),o.Events.enable()),!this.elseifCount&&!this.elseCount)return null;let e=o.utils.xml.createElement("mutation");return this.elseifCount&&e.setAttribute("elseif",`${this.elseifCount}`),this.elseCount&&e.setAttribute("else","1"),e},domToMutation(e){e.getAttribute("inputs")?this.deserializeInputs(e):this.deserializeCounts(e)},deserializeInputs(e){let t=e.getAttribute("inputs");if(t){let e=t.split(",");this.getInput("IF0")&&this.removeInput("IF0"),this.getInput("DO0")&&this.removeInput("DO0");let s=e[0];this.appendValueInput("IF"+s).setCheck("Boolean").appendField(o.Msg.CONTROLS_IF_MSG_IF,"if"),this.appendStatementInput("DO"+s).appendField(o.Msg.CONTROLS_IF_MSG_THEN);for(let t=1;t<e.length;t++)this.appendValueInput("IF"+e[t]).setCheck("Boolean").appendField(o.Msg.CONTROLS_IF_MSG_ELSEIF,"elseif"),this.appendStatementInput("DO"+e[t]).appendField(o.Msg.CONTROLS_IF_MSG_THEN)}"true"==e.getAttribute("else")&&this.addElseInput()},deserializeCounts(e){var t,s;this.elseifCount=parseInt(null!==(t=e.getAttribute("elseif"))&&void 0!==t?t:"0",10)||0,this.elseCount=parseInt(null!==(s=e.getAttribute("else"))&&void 0!==s?s:"0",10)||0;for(let e=1;e<=this.elseifCount;e++)this.insertElseIf(this.inputList.length,e);this.elseCount&&this.addElseInput()},saveExtraState:function(){if(this.isDeadOrDying()||this.isCorrectlyFormatted()||(o.Events.disable(),this.finalizeConnections(),this instanceof o.BlockSvg&&this.initSvg(),o.Events.enable()),!this.elseifCount&&!this.elseCount)return null;let e=Object.create(null);return this.elseifCount&&(e.elseIfCount=this.elseifCount),this.elseCount&&(e.hasElse=!0),e},loadExtraState:function(e){if("string"!=typeof e){this.elseifCount=e.elseIfCount||0,this.elseCount=+!!e.hasElse;for(let e=1;e<=this.elseifCount;e++)this.insertElseIf(this.inputList.length,e);this.elseCount&&this.addElseInput()}else this.domToMutation(o.utils.xml.textToDom(e))},findInputIndexForConnection(e){var t;if(!e.targetConnection||(null===(t=e.targetBlock())||void 0===t?void 0:t.isInsertionMarker()))return null;for(let t=0;t<this.inputList.length;t++)if(this.inputList[t].connection==e)return t;return null},insertElseIf(e,t){let s=this.appendValueInput("IF"+t).setCheck("Boolean").appendField(o.Msg.CONTROLS_IF_MSG_ELSEIF,"elseif"),i=this.appendStatementInput("DO"+t).appendField(o.Msg.CONTROLS_IF_MSG_THEN);return this.moveInputBefore("IF"+t,this.inputList[e].name),this.moveInputBefore("DO"+t,this.inputList[e+1].name),{ifInput:s,doInput:i}},onPendingConnection(e){e.type!==o.NEXT_STATEMENT||this.getInput("ELSE")||this.addElseInput();let t=this.findInputIndexForConnection(e);if(null!==t&&this.inputList[t].name.includes("IF")){let e=this.inputList[t+2];if(e&&"ELSE"!=e.name){let s=e&&e.connection&&e.connection.targetConnection;s&&!s.getSourceBlock().isInsertionMarker()&&this.insertElseIf(t+2,o.utils.idGenerator.genUid())}else this.insertElseIf(t+2,o.utils.idGenerator.genUid())}},finalizeConnections(){var e,t,s;let i=this.collectTargetCaseConns(),n=null===(t=null===(e=this.getInput("ELSE"))||void 0===e?void 0:e.connection)||void 0===t?void 0:t.targetConnection;this.tearDownBlock(),this.addFirstCase(),this.addCaseInputs(i),n&&(null===(s=this.addElseInput().connection)||void 0===s||s.connect(n)),this.elseifCount=Math.max(i.length-1,0),this.elseCount=+!!n},collectTargetCaseConns(){var e,t;let s=[];for(let i=0;i<this.inputList.length-1;i+=2){let n=null===(e=this.inputList[i].connection)||void 0===e?void 0:e.targetConnection,o=null===(t=this.inputList[i+1].connection)||void 0===t?void 0:t.targetConnection;(n||o)&&s.push({ifTarget:n,doTarget:o})}return s},tearDownBlock(){for(let e=this.inputList.length-1;e>=0;e--)this.removeInput(this.inputList[e].name)},addCaseInputs(e){var t,s;for(let i=0;i<e.length;i++){let n=this.getInput(`IF${i}`),o=this.getInput(`DO${i}`);n&&o||({ifInput:n,doInput:o}=this.insertElseIf(2*i,i));let{ifTarget:r,doTarget:l}=e[i];r&&(null===(t=n.connection)||void 0===t||t.connect(r)),l&&(null===(s=o.connection)||void 0===s||s.connect(l))}},addElseInput(){return this.appendStatementInput("ELSE").appendField(o.Msg.CONTROLS_IF_MSG_ELSE)},addFirstCase(){this.appendValueInput("IF0").setCheck("Boolean").appendField(o.Msg.CONTROLS_IF_MSG_IF,"if"),this.appendStatementInput("DO0").appendField(o.Msg.CONTROLS_IF_MSG_THEN)},isCorrectlyFormatted(){for(let e=0;e<this.inputList.length-1;e+=2)if(this.inputList[e].name!==`IF${e}`||this.inputList[e+1].name!==`DO${e}`)return!1;return!0}},o.Blocks.dynamic_text_join={minInputs:2,itemCount:0,init(){this.itemCount=this.minInputs,this.setHelpUrl(o.Msg.TEXT_JOIN_HELPURL),this.setStyle("text_blocks"),this.addFirstInput();for(let e=1;e<this.minInputs;e++)this.appendValueInput(`ADD${e}`);this.setOutput(!0,"String"),this.setTooltip(o.Msg.TEXT_JOIN_TOOLTIP)},mutationToDom(){this.isDeadOrDying()||(o.Events.disable(),this.finalizeConnections(),this instanceof o.BlockSvg&&this.initSvg(),o.Events.enable());let e=o.utils.xml.createElement("mutation");return e.setAttribute("items",`${this.itemCount}`),e},domToMutation(e){e.getAttribute("inputs")?this.deserializeInputs(e):this.deserializeCounts(e)},deserializeInputs(e){let t=e.getAttribute("inputs");if(t){let e=t.split(",");this.inputList=[],e.forEach(e=>this.appendValueInput(e)),this.inputList[0].appendField(o.Msg.TEXT_JOIN_TITLE_CREATEWITH)}},deserializeCounts(e){var t;this.itemCount=Math.max(parseInt(null!==(t=e.getAttribute("items"))&&void 0!==t?t:"0",10),this.minInputs);for(let e=this.minInputs;e<this.itemCount;e++)this.appendValueInput("ADD"+e)},saveExtraState:function(){return this.isDeadOrDying()||this.isCorrectlyFormatted()||(o.Events.disable(),this.finalizeConnections(),this instanceof o.BlockSvg&&this.initSvg(),o.Events.enable()),{itemCount:this.itemCount}},loadExtraState:function(e){var t;if("string"!=typeof e){this.itemCount=null!==(t=e.itemCount)&&void 0!==t?t:0;for(let e=this.minInputs;e<this.itemCount;e++)this.appendValueInput("ADD"+e)}else this.domToMutation(o.utils.xml.textToDom(e))},findInputIndexForConnection(e){var t,s;if(!e.targetConnection||(null===(t=e.targetBlock())||void 0===t?void 0:t.isInsertionMarker()))return null;let i=-1;for(let t=0;t<this.inputList.length;t++)this.inputList[t].connection==e&&(i=t);if(i==this.inputList.length-1)return this.inputList.length+1;let n=this.inputList[i+1],o=null===(s=null==n?void 0:n.connection)||void 0===s?void 0:s.targetConnection;return o&&!o.getSourceBlock().isInsertionMarker()?i+1:null},onPendingConnection(e){let t=this.findInputIndexForConnection(e);null!=t&&(this.appendValueInput(`ADD${o.utils.idGenerator.genUid()}`),this.moveNumberedInputBefore(this.inputList.length-1,t))},finalizeConnections(){let e=this.removeUnnecessaryEmptyConns(this.inputList.map(e=>{var t;return null===(t=e.connection)||void 0===t?void 0:t.targetConnection}));this.tearDownBlock(),this.addItemInputs(e),this.itemCount=e.length},tearDownBlock(){for(let e=this.inputList.length-1;e>=0;e--)this.removeInput(this.inputList[e].name)},removeUnnecessaryEmptyConns(e){let t=[...e];for(let e=t.length-1;e>=0;e--)!t[e]&&t.length>this.minInputs&&t.splice(e,1);return t},addItemInputs(e){var t,s;let i=this.addFirstInput(),n=e[0];n&&(null===(t=i.connection)||void 0===t||t.connect(n));for(let t=1;t<e.length;t++){let i=this.appendValueInput(`ADD${t}`),n=e[t];n&&(null===(s=i.connection)||void 0===s||s.connect(n))}},addFirstInput(){return this.appendValueInput("ADD0").appendField(o.Msg.TEXT_JOIN_TITLE_CREATEWITH)},isCorrectlyFormatted(){for(let e=0;e<this.inputList.length;e++)if(this.inputList[e].name!==`ADD${e}`)return!1;return!0}},o.Blocks.dynamic_list_create={minInputs:2,itemCount:0,init(){this.itemCount=this.minInputs,this.setHelpUrl(o.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.addFirstInput();for(let e=1;e<this.minInputs;e++)this.appendValueInput(`ADD${e}`);this.setOutput(!0,"Array"),this.setTooltip(o.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom(){this.isDeadOrDying()||(o.Events.disable(),this.finalizeConnections(),this instanceof o.BlockSvg&&this.initSvg(),o.Events.enable());let e=o.utils.xml.createElement("mutation");return e.setAttribute("items",`${this.itemCount}`),e},domToMutation(e){e.getAttribute("inputs")?this.deserializeInputs(e):this.deserializeCounts(e)},deserializeInputs(e){let t=e.getAttribute("inputs");if(t){let e=t.split(",");this.inputList=[],e.forEach(e=>this.appendValueInput(e)),this.inputList[0].appendField(o.Msg.LISTS_CREATE_WITH_INPUT_WITH)}},deserializeCounts(e){var t;this.itemCount=Math.max(parseInt(null!==(t=e.getAttribute("items"))&&void 0!==t?t:"0",10),this.minInputs);for(let e=this.minInputs;e<this.itemCount;e++)this.appendValueInput("ADD"+e)},saveExtraState:function(){return this.isDeadOrDying()||this.isCorrectlyFormatted()||(o.Events.disable(),this.finalizeConnections(),this instanceof o.BlockSvg&&this.initSvg(),o.Events.enable()),{itemCount:this.itemCount}},loadExtraState:function(e){var t;if("string"!=typeof e){this.itemCount=null!==(t=e.itemCount)&&void 0!==t?t:0;for(let e=this.minInputs;e<this.itemCount;e++)this.appendValueInput("ADD"+e)}else this.domToMutation(o.utils.xml.textToDom(e))},findInputIndexForConnection(e){var t,s;if(!e.targetConnection||(null===(t=e.targetBlock())||void 0===t?void 0:t.isInsertionMarker()))return null;let i=-1;for(let t=0;t<this.inputList.length;t++)this.inputList[t].connection==e&&(i=t);if(i==this.inputList.length-1)return this.inputList.length+1;let n=this.inputList[i+1],o=null===(s=null==n?void 0:n.connection)||void 0===s?void 0:s.targetConnection;return o&&!o.getSourceBlock().isInsertionMarker()?i+1:null},onPendingConnection(e){let t=this.findInputIndexForConnection(e);null!=t&&(this.appendValueInput(`ADD${o.utils.idGenerator.genUid()}`),this.moveNumberedInputBefore(this.inputList.length-1,t))},finalizeConnections(){let e=this.removeUnnecessaryEmptyConns(this.inputList.map(e=>{var t;return null===(t=e.connection)||void 0===t?void 0:t.targetConnection}));this.tearDownBlock(),this.addItemInputs(e),this.itemCount=e.length},tearDownBlock(){for(let e=this.inputList.length-1;e>=0;e--)this.removeInput(this.inputList[e].name)},removeUnnecessaryEmptyConns(e){let t=[...e];for(let e=t.length-1;e>=0;e--)!t[e]&&t.length>this.minInputs&&t.splice(e,1);return t},addItemInputs(e){var t,s;let i=this.addFirstInput(),n=e[0];n&&(null===(t=i.connection)||void 0===t||t.connect(n));for(let t=1;t<e.length;t++){let i=this.appendValueInput(`ADD${t}`),n=e[t];n&&(null===(s=i.connection)||void 0===s||s.connect(n))}},addFirstInput(){return this.appendValueInput("ADD0").appendField(o.Msg.LISTS_CREATE_WITH_INPUT_WITH)},isCorrectlyFormatted(){for(let e=0;e<this.inputList.length;e++)if(this.inputList[e].name!==`ADD${e}`)return!1;return!0}};let _=function(){o.Blocks.lists_create_with=o.Blocks.dynamic_list_create,o.Blocks.text_join=o.Blocks.dynamic_text_join,o.Blocks.controls_if=o.Blocks.dynamic_if};function u(e){var t;if(e.type===o.Events.BLOCK_DELETE){let s=o.Workspace.getById(null!==(t=e.workspaceId)&&void 0!==t?t:"");if(!s)return;for(let e of s.getAllBlocks())r(e)&&e.finalizeConnections()}}return n})(),e.exports=i(s(1615))},6159:function(e,t,s){var i,n,o;o=function(e,t,s){return e.setLocale(t),e},i=[s(1615),s(3412),s(7281)],void 0!==(n=o.apply(t,i))&&(e.exports=n)},7281:function(e,t,s){var i,n,o;o=function(e){var t=e.__namespace__,s=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);t.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",{customContextMenu:function(e){if(this.isInFlyout){var s,i;("variables_get_dynamic"===this.type||"variables_get_reporter_dynamic"===this.type)&&(o={text:t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:(s=this,function(){let e=s.workspace,i=s.getField("VAR").getVariable();t.renameVariable$$module$build$src$core$variables(e,i)})},r=this.getField("VAR").getText(),r={text:t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",r),enabled:!0,callback:(i=this,function(){let e=i.workspace,t=i.getField("VAR").getVariable();e.deleteVariableById(t.getId()),e.refreshToolboxSelection()})},e.unshift(o),e.unshift(r))}else{if("variables_get_dynamic"===this.type)var n="variables_set_dynamic",o=t.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else n="variables_get_dynamic",o=t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var r=this.getField("VAR");n={type:n,fields:{VAR:r.saveState(!0)}},e.push({enabled:0<this.workspace.remainingCapacity(),text:o.replace("%1",r.getText()),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,n)})}},onchange:function(e){e=this.getFieldValue("VAR"),e=t.getVariable$$module$build$src$core$variables(this.workspace,e),"variables_get_dynamic"===this.type?this.outputConnection.setCheck(e.type):this.getInput("VALUE").connection.setCheck(e.type)}}),t.defineBlocks$$module$build$src$core$common(s);var i=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);t.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",{customContextMenu:function(e){if(this.isInFlyout){var s,i;("variables_get"===this.type||"variables_get_reporter"===this.type)&&(o={text:t.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:(s=this,function(){let e=s.workspace,i=s.getField("VAR").getVariable();t.renameVariable$$module$build$src$core$variables(e,i)})},r=this.getField("VAR").getText(),r={text:t.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",r),enabled:!0,callback:(i=this,function(){let e=i.workspace,t=i.getField("VAR").getVariable();e.deleteVariableById(t.getId()),e.refreshToolboxSelection()})},e.unshift(o),e.unshift(r))}else{if("variables_get"===this.type)var n="variables_set",o=t.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else n="variables_get",o=t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var r=this.getField("VAR");n={type:n,fields:{VAR:r.saveState(!0)}},e.push({enabled:0<this.workspace.remainingCapacity(),text:o.replace("%1",r.getText()),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,n)})}}}),t.defineBlocks$$module$build$src$core$common(i);var n=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]);n.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT);let e=e=>{let s=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+e]});return s.setValidator(function(t){let s=this.getValue();(t="FROM_START"===t||"FROM_END"===t)!=("FROM_START"===s||"FROM_END"===s)&&this.getSourceBlock().updateAt_(e,t)}),s};this.appendDummyInput("WHERE1_INPUT").appendField(e(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(e(2),"WHERE2"),this.appendDummyInput("AT2"),t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");var s=this.getInput("AT1")instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at1",`${s}`),s=this.getInput("AT2")instanceof t.ValueInput$$module$build$src$core$inputs$value_input,e.setAttribute("at2",`${s}`),e},domToMutation:function(e){let t="true"===e.getAttribute("at1");e="true"===e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},updateAt_:function(e,s){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),s?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e),2===e&&t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL)),1===e&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT"))}},n.text_changeCase={init:function(){let e=[[t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},n.text_trim={init:function(){let e=[[t.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[t.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[t.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(t.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},n.text_print={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var o={updateType_:function(e){this.outputConnection.setCheck("NUMBER"===e?"Number":"String")},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("type",this.getFieldValue("TYPE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("type"))}};n.text_prompt_ext=Object.assign({},o,{init:function(){var e=[[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})).setValidator(e=>{this.updateType_(e)}),this.appendValueInput("TEXT").appendField(e,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(()=>"TEXT"===this.getFieldValue("TYPE")?t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),n.text_prompt=Object.assign({},o,{init:function(){this.mixin(r);var e=[[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(t.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})).setValidator(e=>{this.updateType_(e)}),this.appendDummyInput().appendField(e,"TYPE").appendField(this.newQuote_(!0)).appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(()=>"TEXT"===this.getFieldValue("TYPE")?t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:t.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER)}}),n.text_count={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},n.text_replace={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},n.text_reverse={init:function(){this.jsonInit({message0:t.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:t.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:t.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var r={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(e){for(let t=0,s;s=this.inputList[t];t++)for(let t=0,i;i=s.fieldRow[t];t++)if(e===i.name){s.insertFieldAt(t,this.newQuote_(!0)),s.insertFieldAt(t+2,this.newQuote_(!1));return}console.warn('field named "'+e+'" not found in '+this.toDevString())},newQuote_:function(e){return e=this.RTL?!e:e,t.fromJson$$module$build$src$core$field_registry({type:"field_image",src:e?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:e?"“":"”"})}};t.register$$module$build$src$core$extensions("text_append_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR")),t.register$$module$build$src$core$extensions("text_indexOf_tooltip",function(){this.setTooltip(()=>t.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}),t.register$$module$build$src$core$extensions("text_quotes",function(){this.mixin(r),this.quoteField_("TEXT")}),t.registerMixin$$module$build$src$core$extensions("quote_image_mixin",r),t.registerMutator$$module$build$src$core$extensions("text_join_mutator",{itemCount_:0,mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("items",`${this.itemCount_}`),e},domToMutation:function(e){this.itemCount_=parseInt(e.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){let t=e.newBlock("text_create_join_container");t.initSvg();let s=t.getInput("STACK").connection;for(let t=0;t<this.itemCount_;t++){let t=e.newBlock("text_create_join_item");t.initSvg(),s.connect(t.previousConnection),s=t.nextConnection}return t},compose:function(e){var t=e.getInputTargetBlock("STACK");for(e=[];t;)t.isInsertionMarker()||e.push(t.valueConnection_),t=t.getNextBlock();for(t=0;t<this.itemCount_;t++){let s=this.getInput("ADD"+t).connection.targetConnection;s&&!e.includes(s)&&s.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),t=0;t<this.itemCount_;t++){let s;null==(s=e[t])||s.reconnect(this,"ADD"+t)}},saveConnections:function(e){e=e.getInputTargetBlock("STACK");let t=0;for(;e;){if(e.isInsertionMarker()){e=e.getNextBlock();continue}let s=this.getInput("ADD"+t);e.valueConnection_=s&&s.connection.targetConnection,e=e.getNextBlock(),t++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){let s=this.appendValueInput("ADD"+e).setAlign(t.Align$$module$build$src$core$inputs$align.RIGHT);0===e&&s.appendField(t.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}},function(){this.mixin(r),this.itemCount_=2,this.updateShape_(),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))}),t.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",{isAt_:!1,mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("at",`${this.isAt_}`),e},domToMutation:function(e){e="false"!==e.getAttribute("at"),this.updateAt_(e)},updateAt_:function(e){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),e&&(this.appendValueInput("AT").setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),t.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=e}},function(){this.getField("WHERE").setValidator(function(e){e="FROM_START"===e||"FROM_END"===e;let t=this.getSourceBlock();e!==t.isAt_&&t.updateAt_(e)}),this.updateAt_(!0),this.setTooltip(()=>{var e=this.getFieldValue("WHERE");let s=t.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"===e||"FROM_END"===e)&&(e="FROM_START"===e?t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(s+="  "+e.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),s})}),t.defineBlocks$$module$build$src$core$common(n);var l={},_={setStatements_:function(e){this.hasStatements_!==e&&(e?(this.appendStatementInput("STACK").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=e)},updateParams_:function(){let e="";this.arguments_.length&&(e=t.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),t.disable$$module$build$src$core$events$utils();try{this.setFieldValue(e,"PARAMS")}finally{t.enable$$module$build$src$core$events$utils()}},mutationToDom:function(e){let s=t.createElement$$module$build$src$core$utils$xml("mutation");e&&s.setAttribute("name",this.getFieldValue("NAME"));for(let i=0;i<this.argumentVarModels_.length;i++){let n=t.createElement$$module$build$src$core$utils$xml("arg"),o=this.argumentVarModels_[i];n.setAttribute("name",o.name),n.setAttribute("varid",o.getId()),e&&this.paramIds_&&n.setAttribute("paramId",this.paramIds_[i]),s.appendChild(n)}return this.hasStatements_||s.setAttribute("statements","false"),s},domToMutation:function(e){this.arguments_=[],this.argumentVarModels_=[];for(let i=0,n;n=e.childNodes[i];i++)if("arg"===n.nodeName.toLowerCase()){var s=n;let e=s.getAttribute("name");s=s.getAttribute("varid")||s.getAttribute("varId"),this.arguments_.push(e),null!==(s=t.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,s,e,""))?this.argumentVarModels_.push(s):console.log(`Failed to create a variable named "${e}", ignoring.`)}this.updateParams_(),t.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_("false"!==e.getAttribute("statements"))},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;let e=Object.create(null);if(this.argumentVarModels_.length){e.params=[];for(let t=0;t<this.argumentVarModels_.length;t++)e.params.push({name:this.argumentVarModels_[t].name,id:this.argumentVarModels_[t].getId()})}return this.hasStatements_||(e.hasStatements=!1),e},loadExtraState:function(e){if(this.arguments_=[],this.argumentVarModels_=[],e.params)for(let i=0;i<e.params.length;i++){var s=e.params[i];s=t.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,s.id,s.name,""),this.arguments_.push(s.name),this.argumentVarModels_.push(s)}this.updateParams_(),t.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(!1!==e.hasStatements)},decompose:function(e){let s=t.createElement$$module$build$src$core$utils$xml("block");s.setAttribute("type","procedures_mutatorcontainer");var i=t.createElement$$module$build$src$core$utils$xml("statement");i.setAttribute("name","STACK"),s.appendChild(i);for(let e=0;e<this.arguments_.length;e++){let s=t.createElement$$module$build$src$core$utils$xml("block");s.setAttribute("type","procedures_mutatorarg");var n=t.createElement$$module$build$src$core$utils$xml("field");n.setAttribute("name","NAME");let o=t.createTextNode$$module$build$src$core$utils$xml(this.arguments_[e]);n.appendChild(o),s.appendChild(n),n=t.createElement$$module$build$src$core$utils$xml("next"),s.appendChild(n),i.appendChild(s),i=n}return e=t.domToBlock$$module$build$src$core$xml(s,e),"procedures_defreturn"===this.type?e.setFieldValue(this.hasStatements_,"STATEMENTS"):e.removeInput("STATEMENT_INPUT"),t.mutateCallers$$module$build$src$core$procedures(this),e},compose:function(e){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let s=e.getInputTargetBlock("STACK");for(;s&&!s.isInsertionMarker();){var i,n=s.getFieldValue("NAME");this.arguments_.push(n),n=this.workspace.getVariable(n,""),this.argumentVarModels_.push(n),this.paramIds_.push(s.id),s=s.nextConnection&&s.nextConnection.targetBlock()}this.updateParams_(),t.mutateCallers$$module$build$src$core$procedures(this),null!==(e=e.getFieldValue("STATEMENTS"))&&(e="TRUE"===e,this.hasStatements_!==e)&&(e?(this.setStatements_(!0),null==(i=this.statementConnection_)||i.reconnect(this,"STACK"),this.statementConnection_=null):(i=this.getInput("STACK").connection,(this.statementConnection_=i.targetConnection)&&((i=i.targetBlock()).unplug(),i.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(e,s){var i=this.workspace.getVariableById(e);if(""===i.type){i=i.name,s=this.workspace.getVariableById(s);var n=!1;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e&&(this.arguments_[t]=s.name,this.argumentVarModels_[t]=s,n=!0);n&&(this.displayRenamedVar_(i,s.name),t.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(e){let s=e.name,i=!1,n;for(let t=0;t<this.argumentVarModels_.length;t++)this.argumentVarModels_[t].getId()===e.getId()&&(n=this.arguments_[t],this.arguments_[t]=s,i=!0);i&&(this.displayRenamedVar_(n,s),t.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(e,s){this.updateParams_();var i=this.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(i&&i.bubbleIsVisible()){i=i.getWorkspace().getAllBlocks(!1);for(let n=0,o;o=i[n];n++)"procedures_mutatorarg"===o.type&&t.Names$$module$build$src$core$names.equals(e,o.getFieldValue("NAME"))&&o.setFieldValue(s,"NAME")}},customContextMenu:function(e){if(!this.isInFlyout){var s=this.getFieldValue("NAME"),i={type:this.callType_,extraState:{name:s,params:this.arguments_}};if(e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",s),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,i)}),!this.isCollapsed())for(s=0;s<this.argumentVarModels_.length;s++){let n={type:"variables_get",fields:{VAR:{name:(i=this.argumentVarModels_[s]).name,id:i.getId(),type:i.type}}};e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",i.name),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,n)})}}}};l.procedures_defnoreturn=Object.assign({},_,{init:function(){var e=t.findLegalName$$module$build$src$core$procedures("",this);(e=t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:e})).setValidator(t.rename$$module$build$src$core$procedures),e.setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),l.procedures_defreturn=Object.assign({},_,{init:function(){var e=t.findLegalName$$module$build$src$core$procedures("",this);(e=t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:e})).setValidator(t.rename$$module$build$src$core$procedures),e.setSpellcheck(!1),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(e,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(t.Align$$module$build$src$core$inputs$align.RIGHT).appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),l.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(t.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},l.procedures_mutatorarg={init:function(){let e=t.fromJson$$module$build$src$core$field_registry({type:"field_input",text:t.DEFAULT_ARG$$module$build$src$core$procedures});e.setValidator(this.validator_),e.oldShowEditorFn_=e.showEditor_,e.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(e,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,e.onFinishEditing_=this.deleteIntermediateVars_,e.createdVariables_=[],e.onFinishEditing_("x")},validator_:function(e){var t=this.getSourceBlock();let s=t.workspace.getRootWorkspace();if(!(e=e.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;let i=(t.workspace.targetWorkspace||t.workspace).getAllBlocks(!1),n=e.toLowerCase();for(let e=0;e<i.length;e++){if(i[e].id===this.getSourceBlock().id)continue;let t=i[e].getFieldValue("NAME");if(t&&t.toLowerCase()===n)return null}return t.isInFlyout||((t=s.getVariable(e,""))&&t.name!==e&&s.renameVariableById(t.getId(),e),t||(t=s.createVariable(e,""))&&this.createdVariables_&&this.createdVariables_.push(t)),e},deleteIntermediateVars_:function(e){let t=this.getSourceBlock().workspace.getRootWorkspace();if(t)for(let s=0;s<this.createdVariables_.length;s++){let i=this.createdVariables_[s];i.name!==e&&t.deleteVariableById(i.getId())}}};var u="DISABLED_PROCEDURE_DEFINITION",T={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(e,s){t.Names$$module$build$src$core$names.equals(e,this.getProcedureCall())&&(this.setFieldValue(s,"NAME"),this.setTooltip((this.outputConnection?t.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:t.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",s)))},setProcedureParameters_:function(e,s){var i=t.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((i=(i=i&&i.getIcon(t.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&i.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),e.join("\n")===this.arguments_.join("\n"))this.quarkIds_=s;else{if(s.length!==e.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let e=0;e<this.arguments_.length;e++){var n=this.getInput("ARG"+e);n&&(n=n.connection.targetConnection,this.quarkConnections_[this.quarkIds_[e]]=n,i&&n&&!s.includes(this.quarkIds_[e])&&(n.disconnect(),n.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(e),this.argumentVarModels_=[],e=0;e<this.arguments_.length;e++)i=t.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[e],""),this.argumentVarModels_.push(i);if(this.updateShape_(),this.quarkIds_=s){for(s=0;s<this.arguments_.length;s++)if((e=this.quarkIds_[s])in this.quarkConnections_){let t;(null==(t=this.quarkConnections_[e])?0:t.reconnect(this,"ARG"+s))||delete this.quarkConnections_[e]}}}},updateShape_:function(){for(var e=0;e<this.arguments_.length;e++){var s=this.getField("ARGNAME"+e);if(s){t.disable$$module$build$src$core$events$utils();try{s.setValue(this.arguments_[e])}finally{t.enable$$module$build$src$core$events$utils()}}else s=t.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[e]}),this.appendValueInput("ARG"+e).setAlign(t.Align$$module$build$src$core$inputs$align.RIGHT).appendField(s,"ARGNAME"+e)}for(e=this.arguments_.length;this.getInput("ARG"+e);e++)this.removeInput("ARG"+e);(e=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||e.appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&e.removeField("WITH"))},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");e.setAttribute("name",this.getProcedureCall());for(let s=0;s<this.arguments_.length;s++){let i=t.createElement$$module$build$src$core$utils$xml("arg");i.setAttribute("name",this.arguments_[s]),e.appendChild(i)}return e},domToMutation:function(e){var t=e.getAttribute("name");this.renameProcedure(this.getProcedureCall(),t),t=[];let s=[];for(let i=0,n;n=e.childNodes[i];i++)"arg"===n.nodeName.toLowerCase()&&(t.push(n.getAttribute("name")),s.push(n.getAttribute("paramId")));this.setProcedureParameters_(t,s)},saveExtraState:function(){let e=Object.create(null);return e.name=this.getProcedureCall(),this.arguments_.length&&(e.params=this.arguments_),e},loadExtraState:function(e){if(this.renameProcedure(this.getProcedureCall(),e.name),e=e.params){let t=[];t.length=e.length,t.fill(null),this.setProcedureParameters_(e,t)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(e){if(this.workspace&&!this.workspace.isFlyout&&e.recordUndo){if(e.type===t.BLOCK_CREATE$$module$build$src$core$events$events&&e.ids.includes(this.id)){var s=this.getProcedureCall(),i=t.getDefinition$$module$build$src$core$procedures(s,this.workspace);if(i&&(i.type!==this.defType_||JSON.stringify(i.getVars())!==JSON.stringify(this.arguments_))&&(i=null),i)i.isEnabled()||(this.setDisabledReason(!0,u),this.setWarningText(t.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",s)));else{t.setGroup$$module$build$src$core$events$utils(e.group),e=t.createElement$$module$build$src$core$utils$xml("xml"),(s=t.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type",this.defType_);var n=(i=this.getRelativeToSurfaceXY()).y+2*t.config$$module$build$src$core$config.snapRadius;s.setAttribute("x",`${i.x+t.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),s.setAttribute("y",`${n}`),i=this.mutationToDom(),s.appendChild(i),(i=t.createElement$$module$build$src$core$utils$xml("field")).setAttribute("name","NAME"),n=this.getProcedureCall();let o=t.findLegalName$$module$build$src$core$procedures(n,this);n!==o&&this.renameProcedure(n,o),i.appendChild(t.createTextNode$$module$build$src$core$utils$xml(n)),s.appendChild(i),e.appendChild(s),t.domToWorkspace$$module$build$src$core$xml(e,this.workspace),t.setGroup$$module$build$src$core$events$utils(!1)}}else e.type===t.BLOCK_DELETE$$module$build$src$core$events$events?(s=this.getProcedureCall(),t.getDefinition$$module$build$src$core$procedures(s,this.workspace)||(t.setGroup$$module$build$src$core$events$utils(e.group),this.dispose(!0),t.setGroup$$module$build$src$core$events$utils(!1))):e.type===t.BLOCK_CHANGE$$module$build$src$core$events$events&&"disabled"===e.element&&(s=this.getProcedureCall(),(n=t.getDefinition$$module$build$src$core$procedures(s,this.workspace))&&n.id===e.blockId&&((i=t.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),t.setGroup$$module$build$src$core$events$utils(e.group),e=n.isEnabled(),this.setDisabledReason(!e,u),this.setWarningText(e?null:t.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",s)),t.setGroup$$module$build$src$core$events$utils(i)))}},customContextMenu:function(e){if(this.workspace.isMovable()){var s=this.getProcedureCall(),i=this.workspace;e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){let e=t.getDefinition$$module$build$src$core$procedures(s,i);e&&(i.centerOnBlock(e.id),t.setSelected$$module$build$src$core$common(e))}})}}};l.procedures_callnoreturn=Object.assign({},T,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),l.procedures_callreturn=Object.assign({},T,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"}),l.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(t.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(t.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("value",String(Number(this.hasReturnValue_))),e},domToMutation:function(e){this.hasReturnValue_="1"===e.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(e){if(!(this.workspace.isDragging&&this.workspace.isDragging()||e.type!==t.BLOCK_MOVE$$module$build$src$core$events$events&&e.type!==t.BLOCK_CREATE$$module$build$src$core$events$events)){e=!1;var s=this;do{if(this.FUNCTION_TYPES.includes(s.type)){e=!0;break}s=s.getSurroundParent()}while(s);if(e?("procedures_defnoreturn"===s.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!==s.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(t.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(t.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{t.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!e,"UNPARENTED_IFRETURN")}finally{t.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},t.defineBlocks$$module$build$src$core$common(l);var a=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["π","PI"],["e","E"],["φ","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xbd)","SQRT1_2"],["∞","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);t.register$$module$build$src$core$extensions("math_op_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("OP",{ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"})),t.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",{mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation"),s="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return e.setAttribute("divisor_input",String(s)),e},domToMutation:function(e){e="true"===e.getAttribute("divisor_input"),this.updateShape_(e)},updateShape_:function(e){let t=this.getInput("DIVISOR");e?t||this.appendValueInput("DIVISOR").setCheck("Number"):t&&this.removeInput("DIVISOR")}},function(){this.getField("PROPERTY").setValidator(function(e){e="DIVISIBLE_BY"===e,this.getSourceBlock().updateShape_(e)})}),t.register$$module$build$src$core$extensions("math_change_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR")),t.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",{updateType_:function(e){"MODE"===e?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("op",this.getFieldValue("OP")),e},domToMutation:function(e){if(null===(e=e.getAttribute("op")))throw TypeError("xmlElement had no op attribute");this.updateType_(e)}},function(){this.getField("OP").setValidator((function(e){this.updateType_(e)}).bind(this))}),t.defineBlocks$$module$build$src$core$common(a);var E=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);t.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",{WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"})),t.register$$module$build$src$core$extensions("controls_flow_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",{BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"})),t.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",{customContextMenu:function(e){if(!this.isInFlyout){var s=this.getField("VAR"),i=s.getVariable().name;this.isCollapsed()||null===i||(s={type:"variables_get",fields:{VAR:s.saveState(!0)}},e.push({enabled:!0,text:t.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",i),callback:t.callbackFactory$$module$build$src$core$contextmenu(this,s)}))}}}),t.register$$module$build$src$core$extensions("controls_for_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),t.register$$module$build$src$core$extensions("controls_forEach_tooltip",t.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var c=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);t.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",{getSurroundLoop:function(){let e=this;do{if(c.has(e.type))return e;e=e.getSurroundParent()}while(e);return null},onchange:function(e){let s=this.workspace;if(s.isDragging&&!s.isDragging()&&(e.type===t.BLOCK_MOVE$$module$build$src$core$events$events||e.type===t.BLOCK_CREATE$$module$build$src$core$events$events)&&(e=!!this.getSurroundLoop(),this.setWarningText(e?null:t.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{t.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!e,"CONTROL_FLOW_NOT_IN_LOOP")}finally{t.setRecordUndo$$module$build$src$core$events$utils(!0)}}}),t.defineBlocks$$module$build$src$core$common(E);var d=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["≠","NEQ"],["‏<","LT"],["‏≤","LTE"],["‏>","GT"],["‏≥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);t.register$$module$build$src$core$extensions("logic_op_tooltip",t.buildTooltipForDropdown$$module$build$src$core$extensions("OP",{EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"})),t.registerMutator$$module$build$src$core$extensions("controls_if_mutator",{elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;let e=t.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&e.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&e.setAttribute("else","1"),e},domToMutation:function(e){this.elseifCount_=parseInt(e.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(e.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;let e=Object.create(null);return this.elseifCount_&&(e.elseIfCount=this.elseifCount_),this.elseCount_&&(e.hasElse=!0),e},loadExtraState:function(e){this.elseifCount_=e.elseIfCount||0,this.elseCount_=+!!e.hasElse,this.updateShape_()},decompose:function(e){let t=e.newBlock("controls_if_if");t.initSvg();let s=t.nextConnection;for(let t=1;t<=this.elseifCount_;t++){let t=e.newBlock("controls_if_elseif");t.initSvg(),s.connect(t.previousConnection),s=t.nextConnection}return this.elseCount_&&((e=e.newBlock("controls_if_else")).initSvg(),s.connect(e.previousConnection)),t},compose:function(e){e=e.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;let t=[null],s=[null],i=null;for(;e;){if(!e.isInsertionMarker())switch(e.type){case"controls_if_elseif":this.elseifCount_++,t.push(e.valueConnection_),s.push(e.statementConnection_);break;case"controls_if_else":this.elseCount_++,i=e.statementConnection_;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(t,s,i)},saveConnections:function(e){e=e.nextConnection.targetBlock();let t=1;for(;e;){if(!e.isInsertionMarker())switch(e.type){case"controls_if_elseif":var s=this.getInput("IF"+t);let i=this.getInput("DO"+t);e.valueConnection_=s&&s.connection.targetConnection,e.statementConnection_=i&&i.connection.targetConnection,t++;break;case"controls_if_else":s=this.getInput("ELSE"),e.statementConnection_=s&&s.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+e.type)}e=e.getNextBlock()}},rebuildShape_:function(){let e=[null],t=[null],s=null;this.getInput("ELSE")&&(s=this.getInput("ELSE").connection.targetConnection);for(let s=1;this.getInput("IF"+s);s++){let i=this.getInput("IF"+s),n=this.getInput("DO"+s);e.push(i.connection.targetConnection),t.push(n.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(e,t,s)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var e=1;this.getInput("IF"+e);e++)this.removeInput("IF"+e),this.removeInput("DO"+e);for(e=1;e<=this.elseifCount_;e++)this.appendValueInput("IF"+e).setCheck("Boolean").appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+e).appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(t.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(e,t,s){for(let s=1;s<=this.elseifCount_;s++){let i,n;null==(i=e[s])||i.reconnect(this,"IF"+s),null==(n=t[s])||n.reconnect(this,"DO"+s)}null==s||s.reconnect(this,"ELSE")}},null,["controls_if_elseif","controls_if_else"]),t.register$$module$build$src$core$extensions("controls_if_tooltip",function(){this.setTooltip((function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4:"":t.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1}).bind(this))});var $={onchange:function(e){this.prevBlocks_||(this.prevBlocks_=[null,null]);var s=this.getInputTargetBlock("A");let i=this.getInputTargetBlock("B");s&&i&&!this.workspace.connectionChecker.doTypeChecks(s.outputConnection,i.outputConnection)&&(t.setGroup$$module$build$src$core$events$utils(e.group),(e=this.prevBlocks_[0])!==s&&(s.unplug(),!e||e.isDisposed()||e.isShadow()||this.getInput("A").connection.connect(e.outputConnection)),(s=this.prevBlocks_[1])!==i&&(i.unplug(),!s||s.isDisposed()||s.isShadow()||this.getInput("B").connection.connect(s.outputConnection)),this.bumpNeighbours(),t.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}};t.register$$module$build$src$core$extensions("logic_compare",function(){this.mixin($)}),t.registerMixin$$module$build$src$core$extensions("logic_ternary",{prevParentConnection_:null,onchange:function(e){let s=this.getInputTargetBlock("THEN"),i=this.getInputTargetBlock("ELSE"),n=this.outputConnection.targetConnection;if((s||i)&&n)for(let o=0;2>o;o++){let r=1===o?s:i;r&&!r.workspace.connectionChecker.doTypeChecks(r.outputConnection,n)&&(t.setGroup$$module$build$src$core$events$utils(e.group),n===this.prevParentConnection_?(this.unplug(),n.getSourceBlock().bumpNeighbours()):(r.unplug(),r.bumpNeighbours()),t.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=n}}),t.defineBlocks$$module$build$src$core$common(d);var I=t.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]);I.lists_create_with={init:function(){this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new t.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("items",String(this.itemCount_)),e},domToMutation:function(e){if(!(e=e.getAttribute("items")))throw TypeError("element did not have items");this.itemCount_=parseInt(e,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(e){this.itemCount_=e.itemCount,this.updateShape_()},decompose:function(e){let t=e.newBlock("lists_create_with_container");t.initSvg();let s=t.getInput("STACK").connection;for(let t=0;t<this.itemCount_;t++){let t=e.newBlock("lists_create_with_item");if(t.initSvg(),!t.previousConnection)throw Error("itemBlock has no previousConnection");s.connect(t.previousConnection),s=t.nextConnection}return t},compose:function(e){var t=e.getInputTargetBlock("STACK");for(e=[];t;)t.isInsertionMarker()||e.push(t.valueConnection_),t=t.getNextBlock();for(t=0;t<this.itemCount_;t++){let s=this.getInput("ADD"+t).connection.targetConnection;s&&!e.includes(s)&&s.disconnect()}for(this.itemCount_=e.length,this.updateShape_(),t=0;t<this.itemCount_;t++){let s;null==(s=e[t])||s.reconnect(this,"ADD"+t)}},saveConnections:function(e){e=e.getInputTargetBlock("STACK");let t=0;for(;e;){if(e.isInsertionMarker()){e=e.getNextBlock();continue}let s=this.getInput("ADD"+t);e.valueConnection_=null==s?void 0:s.connection.targetConnection,e=e.getNextBlock(),t++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var e=0;e<this.itemCount_;e++)if(!this.getInput("ADD"+e)){let s=this.appendValueInput("ADD"+e).setAlign(t.Align$$module$build$src$core$inputs$align.RIGHT);0===e&&s.appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(e=this.itemCount_;this.getInput("ADD"+e);e++)this.removeInput("ADD"+e)}},I.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},I.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},I.lists_indexOf={init:function(){var e=[[t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),!(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})))throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(e,"END"),this.setInputsInline(!0),this.setTooltip(()=>t.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1"))}},I.lists_getIndex={init:function(){var e=[[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e})).setValidator(function(e){e="REMOVE"===e,this.getSourceBlock().updateStatement_(e)}),this.appendValueInput("VALUE").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS})).setValidator(function(e){let t=this.getValue();(e="FROM_START"===e||"FROM_END"===e)!=("FROM_START"===t||"FROM_END"===t)&&this.getSourceBlock().updateAt_(e)}),this.appendDummyInput().appendField(e,"WHERE"),this.appendDummyInput("AT"),t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip(()=>{let e=this.getFieldValue("MODE"),s=this.getFieldValue("WHERE"),i="";switch(e+" "+s){case"GET FROM_START":case"GET FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return("FROM_START"===s||"FROM_END"===s)&&(i+="  "+("FROM_START"===s?t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),i})},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");e.setAttribute("statement",String(!this.outputConnection));let s=this.getInput("AT")instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at",String(s)),e},domToMutation:function(e){let t="true"===e.getAttribute("statement");this.updateStatement_(t),e="false"!==e.getAttribute("at"),this.updateAt_(e)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(e){e.isStatement?this.updateStatement_(!0):"string"==typeof e&&this.domToMutation(t.textToDom$$module$build$src$core$utils$xml(e))},updateStatement_:function(e){!this.outputConnection!==e&&(this.unplug(!0,!0),e?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},I.lists_setIndex={init:function(){var e=[[t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[t.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:e}),this.appendDummyInput().appendField(e,"MODE").appendField("","SPACE"),(e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS})).setValidator(function(e){let t=this.getValue();(e="FROM_START"===e||"FROM_END"===e)!=("FROM_START"===t||"FROM_END"===t)&&this.getSourceBlock().updateAt_(e)}),this.appendDummyInput().appendField(e,"WHERE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip(()=>{let e=this.getFieldValue("MODE"),s=this.getFieldValue("WHERE"),i="";switch(e+" "+s){case"SET FROM_START":case"SET FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":i=t.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return("FROM_START"===s||"FROM_END"===s)&&(i+="  "+t.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),i})},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation"),s=this.getInput("AT")instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at",String(s)),e},domToMutation:function(e){e="false"!==e.getAttribute("at"),this.updateAt_(e)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(e){this.removeInput("AT"),this.removeInput("ORDINAL",!0),e?(this.appendValueInput("AT").setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO")}},I.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST);let e=e=>{let s=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+e]});return s.setValidator(function(t){let s=this.getValue();(t="FROM_START"===t||"FROM_END"===t)!=("FROM_START"===s||"FROM_END"===s)&&this.getSourceBlock().updateAt_(e,t)}),s};this.appendDummyInput("WHERE1_INPUT").appendField(e(1),"WHERE1"),this.appendDummyInput("AT1"),this.appendDummyInput("WHERE2_INPUT").appendField(e(2),"WHERE2"),this.appendDummyInput("AT2"),t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");var s=this.getInput("AT1")instanceof t.ValueInput$$module$build$src$core$inputs$value_input;return e.setAttribute("at1",String(s)),s=this.getInput("AT2")instanceof t.ValueInput$$module$build$src$core$inputs$value_input,e.setAttribute("at2",String(s)),e},domToMutation:function(e){let t="true"===e.getAttribute("at1");e="true"===e.getAttribute("at2"),this.updateAt_(1,t),this.updateAt_(2,e)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(e,s){this.removeInput("AT"+e),this.removeInput("ORDINAL"+e,!0),s?(this.appendValueInput("AT"+e).setCheck("Number"),t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+e).appendField(t.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+e),1===e&&(this.moveInputBefore("AT1","WHERE2_INPUT"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","WHERE2_INPUT")),t.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},I.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},I.lists_split={init:function(){let e=t.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[t.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[t.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!e)throw Error("field_dropdown not found");e.setValidator(e=>{this.updateType_(e)}),this.setHelpUrl(t.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(e,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(t.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(()=>{let e=this.getFieldValue("MODE");if("SPLIT"===e)return t.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"===e)return t.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+e)})},updateType_:function(e){if(this.getFieldValue("MODE")!==e){let e=this.getInput("INPUT").connection;e.setShadowDom(null);let t=e.targetBlock();t&&(e.disconnect(),t.isShadow()?t.dispose(!1):this.bumpNeighbours())}"SPLIT"===e?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){let e=t.createElement$$module$build$src$core$utils$xml("mutation");return e.setAttribute("mode",this.getFieldValue("MODE")),e},domToMutation:function(e){this.updateType_(e.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},t.defineBlocks$$module$build$src$core$common(I);var O={blocks:Object.assign({},I,d,E,a,l,n,i,s),lists:{blocks:I},logic:{blocks:d},loops:{blocks:E,loopTypes:c},math:{blocks:a},procedures:{blocks:l},texts:{blocks:n},variables:{blocks:i},variablesDynamic:{blocks:s}};return O.__namespace__=t,O},i=[s(1615)],void 0!==(n=o.apply(t,i))&&(e.exports=n)},8142:(e,t,s)=>{"use strict";s.d(t,{WQ:()=>ts,Wj:()=>x,sV:()=>N,sh:()=>eZ});let{ASTNode:i,BasicCursor:n,Block:o,BlockSvg:r,Blocks:l,COLLAPSED_FIELD_NAME:_,COLLAPSED_INPUT_NAME:u,COLLAPSE_CHARS:T,CodeGenerator:a,CollapsibleToolboxCategory:E,ComponentManager:c,Connection:d,ConnectionChecker:$,ConnectionDB:I,ConnectionType:O,ContextMenu:p,ContextMenuItems:m,ContextMenuRegistry:g,Css:L,Cursor:R,DELETE_VARIABLE_ID:h,DeleteArea:S,DragTarget:A,DropDownDiv:M,Events:N,Extensions:C,Field:b,FieldCheckbox:f,FieldDropdown:D,FieldImage:P,FieldLabel:U,FieldLabelSerializable:F,FieldNumber:v,FieldTextInput:B,FieldVariable:k,Flyout:y,FlyoutButton:H,FlyoutMetricsManager:G,Generator:x,Gesture:V,Grid:w,HorizontalFlyout:X,INPUT_VALUE:Y,Input:K,InsertionMarkerManager:W,InsertionMarkerPreviewer:j,Marker:q,MarkerManager:J,Menu:Q,MenuItem:z,MetricsManager:Z,Msg:ee,NEXT_STATEMENT:et,Names:es,OPPOSITE_TYPE:ei,OUTPUT_VALUE:en,Options:eo,PREVIOUS_STATEMENT:er,PROCEDURE_CATEGORY_NAME:el,Procedures:e_,RENAME_VARIABLE_ID:eu,RenderedConnection:eT,Scrollbar:ea,ScrollbarPair:eE,ShortcutItems:ec,ShortcutRegistry:ed,TOOLBOX_AT_BOTTOM:e$,TOOLBOX_AT_LEFT:eI,TOOLBOX_AT_RIGHT:eO,TOOLBOX_AT_TOP:ep,TabNavigateCursor:em,Theme:eg,ThemeManager:eL,Themes:eR,Toolbox:eh,ToolboxCategory:eS,ToolboxItem:eA,ToolboxSeparator:eM,Tooltip:eN,Touch:eC,Trashcan:eb,UnattachedFieldError:ef,VARIABLE_CATEGORY_NAME:eD,VARIABLE_DYNAMIC_CATEGORY_NAME:eP,VERSION:eU,VariableMap:eF,VariableModel:ev,Variables:eB,VariablesDynamic:ek,VerticalFlyout:ey,WidgetDiv:eH,Workspace:eG,WorkspaceAudio:ex,WorkspaceDragger:eV,WorkspaceSvg:ew,Xml:eX,ZoomControls:eY,blockAnimations:eK,blockRendering:eW,browserEvents:ej,bubbles:eq,bumpObjects:eJ,clipboard:eQ,comments:ez,common:eZ,config:e0,constants:e1,defineBlocksWithJsonArray:e2,dialog:e3,dragging:e8,fieldRegistry:e4,geras:e5,getMainWorkspace:e9,getSelected:e6,hasBubble:e7,hideChaff:te,icons:tt,inject:ts,inputs:ti,isCopyable:tn,isDeletable:to,isDraggable:tr,isIcon:tl,isObservable:t_,isPaster:tu,isRenderedElement:tT,isSelectable:ta,isSerializable:tE,isVariableBackedParameterModel:tc,layers:td,procedures:t$,registry:tI,renderManagement:tO,serialization:tp,setLocale:tm,setParentContainer:tg,svgResize:tL,thrasos:tR,uiPosition:th,utils:tS,zelos:tA}=s(6159)},9705:(e,t,s)=>{"use strict";s.d(t,{pH:()=>n});let{JavascriptGenerator:i,Order:n,javascriptGenerator:o}=s(9986)},9986:function(e,t,s){var i,n,o;o=function(e){var t,s,i=e.__namespace__,n=function(e,t){var i=0;let n="";t.STATEMENT_PREFIX&&(n+=t.injectId(t.STATEMENT_PREFIX,e));do{let o=t.valueToCode(e,"IF"+i,s.NONE)||"false",r=t.statementToCode(e,"DO"+i);t.STATEMENT_SUFFIX&&(r=t.prefixLines(t.injectId(t.STATEMENT_SUFFIX,e),t.INDENT)+r),n+=(0<i?" else ":"")+"if ("+o+") {\n"+r+"}",i++}while(e.getInput("IF"+i));return(e.getInput("ELSE")||t.STATEMENT_SUFFIX)&&(i=t.statementToCode(e,"ELSE"),t.STATEMENT_SUFFIX&&(i=t.prefixLines(t.injectId(t.STATEMENT_SUFFIX,e),t.INDENT)+i),n+=" else {\n"+i+"}"),n+"\n"},o=function(e,t){let n;n=e.getField("TIMES")?String(Number(e.getFieldValue("TIMES"))):t.valueToCode(e,"TIMES",s.ASSIGNMENT)||"0";let o=t.statementToCode(e,"DO");o=t.addLoopTrap(o,e),e="";let r=t.nameDB_.getDistinctName("count",i.NameType$$module$build$src$core$names.VARIABLE),l=n;return n.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(n)||(e+="var "+(l=t.nameDB_.getDistinctName("repeat_end",i.NameType$$module$build$src$core$names.VARIABLE))+" = "+n+";\n"),e+("for (var "+r+" = 0; "+r+" < "+l+"; "+r+"++) {\n")+o+"}\n"},r=function(e,t){let i;let n=e.getFieldValue("OP");if("NEG"===n)return"-"===(e=t.valueToCode(e,"NUM",s.UNARY_NEGATION)||"0")[0]&&(e=" "+e),["-"+e,s.UNARY_NEGATION];switch(e="SIN"===n||"COS"===n||"TAN"===n?t.valueToCode(e,"NUM",s.DIVISION)||"0":t.valueToCode(e,"NUM",s.NONE)||"0",n){case"ABS":i="Math.abs("+e+")";break;case"ROOT":i="Math.sqrt("+e+")";break;case"LN":i="Math.log("+e+")";break;case"EXP":i="Math.exp("+e+")";break;case"POW10":i="Math.pow(10,"+e+")";break;case"ROUND":i="Math.round("+e+")";break;case"ROUNDUP":i="Math.ceil("+e+")";break;case"ROUNDDOWN":i="Math.floor("+e+")";break;case"SIN":i="Math.sin("+e+" / 180 * Math.PI)";break;case"COS":i="Math.cos("+e+" / 180 * Math.PI)";break;case"TAN":i="Math.tan("+e+" / 180 * Math.PI)"}if(i)return[i,s.FUNCTION_CALL];switch(n){case"LOG10":i="Math.log("+e+") / Math.log(10)";break;case"ASIN":i="Math.asin("+e+") / Math.PI * 180";break;case"ACOS":i="Math.acos("+e+") / Math.PI * 180";break;case"ATAN":i="Math.atan("+e+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+n)}return[i,s.DIVISION]},l=function(e,t){let i=t.getProcedureName(e.getFieldValue("NAME"));var n="";t.STATEMENT_PREFIX&&(n+=t.injectId(t.STATEMENT_PREFIX,e)),t.STATEMENT_SUFFIX&&(n+=t.injectId(t.STATEMENT_SUFFIX,e)),n&&(n=t.prefixLines(n,t.INDENT));let o="";t.INFINITE_LOOP_TRAP&&(o=t.prefixLines(t.injectId(t.INFINITE_LOOP_TRAP,e),t.INDENT));let r="";e.getInput("STACK")&&(r=t.statementToCode(e,"STACK"));let l="";e.getInput("RETURN")&&(l=t.valueToCode(e,"RETURN",s.NONE)||"");let _="";r&&l&&(_=n),l&&(l=t.INDENT+"return "+l+";\n");let u=[],T=e.getVars();for(let e=0;e<T.length;e++)u[e]=t.getVariableName(T[e]);return n="function "+i+"("+u.join(", ")+") {\n"+n+o+r+_+l+"}",n=t.scrub_(e,n),t.definitions_["%"+i]=n,null},_=function(e,t){return t="window.prompt("+(e.getField("TEXT")?t.quote_(e.getFieldValue("TEXT")):t.valueToCode(e,"TEXT",s.NONE)||"''")+")","NUMBER"===e.getFieldValue("TYPE")&&(t="Number("+t+")"),[t,s.FUNCTION_CALL]},u=function(e,t){return[t.getVariableName(e.getFieldValue("VAR")),s.ATOMIC]},T=function(e,t){let i=t.valueToCode(e,"VALUE",s.ASSIGNMENT)||"0";return t.getVariableName(e.getFieldValue("VAR"))+" = "+i+";\n"};(t=s||(s={}))[t.ATOMIC=0]="ATOMIC",t[t.NEW=1.1]="NEW",t[t.MEMBER=1.2]="MEMBER",t[t.FUNCTION_CALL=2]="FUNCTION_CALL",t[t.INCREMENT=3]="INCREMENT",t[t.DECREMENT=3]="DECREMENT",t[t.BITWISE_NOT=4.1]="BITWISE_NOT",t[t.UNARY_PLUS=4.2]="UNARY_PLUS",t[t.UNARY_NEGATION=4.3]="UNARY_NEGATION",t[t.LOGICAL_NOT=4.4]="LOGICAL_NOT",t[t.TYPEOF=4.5]="TYPEOF",t[t.VOID=4.6]="VOID",t[t.DELETE=4.7]="DELETE",t[t.AWAIT=4.8]="AWAIT",t[t.EXPONENTIATION=5]="EXPONENTIATION",t[t.MULTIPLICATION=5.1]="MULTIPLICATION",t[t.DIVISION=5.2]="DIVISION",t[t.MODULUS=5.3]="MODULUS",t[t.SUBTRACTION=6.1]="SUBTRACTION",t[t.ADDITION=6.2]="ADDITION",t[t.BITWISE_SHIFT=7]="BITWISE_SHIFT",t[t.RELATIONAL=8]="RELATIONAL",t[t.IN=8]="IN",t[t.INSTANCEOF=8]="INSTANCEOF",t[t.EQUALITY=9]="EQUALITY",t[t.BITWISE_AND=10]="BITWISE_AND",t[t.BITWISE_XOR=11]="BITWISE_XOR",t[t.BITWISE_OR=12]="BITWISE_OR",t[t.LOGICAL_AND=13]="LOGICAL_AND",t[t.LOGICAL_OR=14]="LOGICAL_OR",t[t.CONDITIONAL=15]="CONDITIONAL",t[t.ASSIGNMENT=16]="ASSIGNMENT",t[t.YIELD=17]="YIELD",t[t.COMMA=18]="COMMA",t[t.NONE=99]="NONE";var a=class extends i.CodeGenerator$$module$build$src$core$generator{constructor(e="JavaScript"){for(let t in super(e),this.ORDER_OVERRIDES=[[s.FUNCTION_CALL,s.MEMBER],[s.FUNCTION_CALL,s.FUNCTION_CALL],[s.MEMBER,s.MEMBER],[s.MEMBER,s.FUNCTION_CALL],[s.LOGICAL_NOT,s.LOGICAL_NOT],[s.MULTIPLICATION,s.MULTIPLICATION],[s.ADDITION,s.ADDITION],[s.LOGICAL_AND,s.LOGICAL_AND],[s.LOGICAL_OR,s.LOGICAL_OR]],this.isInitialized=!1,s)"string"!=typeof(e=s[t])&&(this["ORDER_"+t]=e);this.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(globalThis).join(","))}init(e){super.init(e),this.nameDB_?this.nameDB_.reset():this.nameDB_=new i.Names$$module$build$src$core$names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(e.getVariableMap()),this.nameDB_.populateVariables(e),this.nameDB_.populateProcedures(e);let t=[];var s=i.allDeveloperVariables$$module$build$src$core$variables(e);for(let e=0;e<s.length;e++)t.push(this.nameDB_.getName(s[e],i.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE));for(s=0,e=i.allUsedVarModels$$module$build$src$core$variables(e);s<e.length;s++)t.push(this.nameDB_.getName(e[s].getId(),i.NameType$$module$build$src$core$names.VARIABLE));t.length&&(this.definitions_.variables="var "+t.join(", ")+";"),this.isInitialized=!0}finish(e){let t=Object.values(this.definitions_);return super.finish(e),this.isInitialized=!1,this.nameDB_.reset(),t.join("\n\n")+"\n\n\n"+e}scrubNakedValue(e){return e+";\n"}quote_(e){return"'"+(e=e.replace(/\\/g,"\\\\").replace(/\n/g,"\\\n").replace(/'/g,"\\'"))+"'"}multiline_quote_(e){return e.split(/\n/g).map(this.quote_).join(" + '\\n' +\n")}scrub_(e,t,s=!1){let n="";if(!e.outputConnection||!e.outputConnection.targetConnection){var o=e.getCommentText();o&&(o=i.wrap$$module$build$src$core$utils$string(o,this.COMMENT_WRAP-3),n+=this.prefixLines(o+"\n","// "));for(let t=0;t<e.inputList.length;t++)e.inputList[t].type===i.inputTypes$$module$build$src$core$inputs$input_types.VALUE&&(o=e.inputList[t].connection.targetBlock())&&(o=this.allNestedComments(o))&&(n+=this.prefixLines(o,"// "))}return e=e.nextConnection&&e.nextConnection.targetBlock(),n+t+(s=s?"":this.blockToCode(e))}getAdjusted(e,t,n=0,o=!1,r=s.NONE){e.workspace.options.oneBasedIndex&&n--;let l=e.workspace.options.oneBasedIndex?"1":"0",_=r;return 0<n?_=s.ADDITION:0>n?_=s.SUBTRACTION:o&&(_=s.UNARY_NEGATION),e=this.valueToCode(e,t,_)||l,(0!==n||o)&&(i.isNumber$$module$build$src$core$utils$string(e)?(e=String(Number(e)+n),o&&(e=String(-Number(e)))):(0<n?e=`${e} + ${n}`:0>n&&(e=`${e} - ${-n}`),o&&(e=n?`-(${e})`:`-${e}`),Math.floor(r)>=Math.floor(_)&&(e=`(${e})`))),e}},E={};E.JavascriptGenerator=a,E.Order=s;var c=function(e,t,s){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+s:"LAST"===t?e+".length - 1":s},d={};d.lists_create_empty=function(e,t){return["[]",s.ATOMIC]},d.lists_create_with=function(e,t){let i=Array(e.itemCount_);for(let n=0;n<e.itemCount_;n++)i[n]=t.valueToCode(e,"ADD"+n,s.NONE)||"null";return["["+i.join(", ")+"]",s.ATOMIC]},d.lists_getIndex=function(e,t){let i=e.getFieldValue("MODE")||"GET",n=e.getFieldValue("WHERE")||"FROM_START";var o=t.valueToCode(e,"VALUE","RANDOM"===n?s.NONE:s.MEMBER)||"[]";switch(n){case"FIRST":if("GET"===i)return[o+"[0]",s.MEMBER];if("GET_REMOVE"===i)return[o+".shift()",s.MEMBER];if("REMOVE"===i)return o+".shift();\n";break;case"LAST":if("GET"===i)return[o+".slice(-1)[0]",s.MEMBER];if("GET_REMOVE"===i)return[o+".pop()",s.MEMBER];if("REMOVE"===i)return o+".pop();\n";break;case"FROM_START":if(e=t.getAdjusted(e,"AT"),"GET"===i)return[o+"["+e+"]",s.MEMBER];if("GET_REMOVE"===i)return[o+".splice("+e+", 1)[0]",s.FUNCTION_CALL];if("REMOVE"===i)return o+".splice("+e+", 1);\n";break;case"FROM_END":if(e=t.getAdjusted(e,"AT",1,!0),"GET"===i)return[o+".slice("+e+")[0]",s.FUNCTION_CALL];if("GET_REMOVE"===i)return[o+".splice("+e+", 1)[0]",s.FUNCTION_CALL];if("REMOVE"===i)return o+".splice("+e+", 1);";break;case"RANDOM":if(o=t.provideFunction_("listsGetRandomItem",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+o+", "+("GET"!==i)+")","GET"===i||"GET_REMOVE"===i)return[o,s.FUNCTION_CALL];if("REMOVE"===i)return o+";\n"}throw Error("Unhandled combination (lists_getIndex).")},d.lists_getSublist=function(e,t){var i={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"},n=t.valueToCode(e,"LIST",s.MEMBER)||"[]";let o=e.getFieldValue("WHERE1"),r=e.getFieldValue("WHERE2");if("FIRST"===o&&"LAST"===r)n+=".slice(0)";else if(n.match(/^\w+$/)||"FROM_END"!==o&&"FROM_START"===r){switch(o){case"FROM_START":i=t.getAdjusted(e,"AT1");break;case"FROM_END":i=n+".length - "+(i=t.getAdjusted(e,"AT1",1,!1,s.SUBTRACTION));break;case"FIRST":i="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(r){case"FROM_START":t=t.getAdjusted(e,"AT2",1);break;case"FROM_END":t=n+".length - "+(t=t.getAdjusted(e,"AT2",0,!1,s.SUBTRACTION));break;case"LAST":t=n+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}n=n+".slice("+i+", "+t+")"}else{let s=t.getAdjusted(e,"AT1");e=t.getAdjusted(e,"AT2"),n=t.provideFunction_("subsequence"+i[o]+i[r],`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===o||"FROM_START"===o?", at1":""}${"FROM_END"===r||"FROM_START"===r?", at2":""}) {
  var start = ${c("sequence",o,"at1")};
  var end = ${c("sequence",r,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+n+("FROM_END"===o||"FROM_START"===o?", "+s:"")+("FROM_END"===r||"FROM_START"===r?", "+e:"")+")"}return[n,s.FUNCTION_CALL]},d.lists_indexOf=function(e,t){let i="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf",n=t.valueToCode(e,"FIND",s.NONE)||"''";return t=(t.valueToCode(e,"VALUE",s.MEMBER)||"[]")+"."+i+"("+n+")",e.workspace.options.oneBasedIndex?[t+" + 1",s.ADDITION]:[t,s.FUNCTION_CALL]},d.lists_isEmpty=function(e,t){return["!"+(t.valueToCode(e,"VALUE",s.MEMBER)||"[]")+".length",s.LOGICAL_NOT]},d.lists_length=function(e,t){return[(t.valueToCode(e,"VALUE",s.MEMBER)||"[]")+".length",s.MEMBER]},d.lists_repeat=function(e,t){let i=t.provideFunction_("listsRepeat",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`);return[i+"("+(t.valueToCode(e,"ITEM",s.NONE)||"null")+", "+(e=t.valueToCode(e,"NUM",s.NONE)||"0")+")",s.FUNCTION_CALL]},d.lists_reverse=function(e,t){return[(t.valueToCode(e,"LIST",s.FUNCTION_CALL)||"[]")+".slice().reverse()",s.FUNCTION_CALL]},d.lists_setIndex=function(e,t){function n(){if(o.match(/^\w+$/))return"";let e=t.nameDB_.getDistinctName("tmpList",i.NameType$$module$build$src$core$names.VARIABLE),s="var "+e+" = "+o+";\n";return o=e,s}let o=t.valueToCode(e,"LIST",s.MEMBER)||"[]",r=e.getFieldValue("MODE")||"GET";var l=e.getFieldValue("WHERE")||"FROM_START";let _=t.valueToCode(e,"TO",s.ASSIGNMENT)||"null";switch(l){case"FIRST":if("SET"===r)return o+"[0] = "+_+";\n";if("INSERT"===r)return o+".unshift("+_+");\n";break;case"LAST":if("SET"===r)return n()+(o+"["+o+".length - 1] = ")+_+";\n";if("INSERT"===r)return o+".push("+_+");\n";break;case"FROM_START":if(e=t.getAdjusted(e,"AT"),"SET"===r)return o+"["+e+"] = "+_+";\n";if("INSERT"===r)return o+".splice("+e+", 0, "+_+");\n";break;case"FROM_END":if(e=t.getAdjusted(e,"AT",1,!1,s.SUBTRACTION),l=n(),"SET"===r)return l+(o+"["+o+".length - "+e+"] = ")+_+";\n";if("INSERT"===r)return l+(o+".splice("+o+".length - "+e+", 0, ")+_+");\n";break;case"RANDOM":if(e=n()+("var "+(l=t.nameDB_.getDistinctName("tmpX",i.NameType$$module$build$src$core$names.VARIABLE))+" = Math.floor(Math.random() * "+o+".length);\n"),"SET"===r)return e+(o+"["+l+"] = ")+_+";\n";if("INSERT"===r)return e+(o+".splice("+l+", 0, ")+_+");\n"}throw Error("Unhandled combination (lists_setIndex).")},d.lists_sort=function(e,t){let i=t.valueToCode(e,"LIST",s.FUNCTION_CALL)||"[]",n="1"===e.getFieldValue("DIRECTION")?1:-1;return e=e.getFieldValue("TYPE"),[i+".slice().sort("+(t=t.provideFunction_("listsGetSortCompare",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return String(a) > String(b) ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return String(a).toLowerCase() > String(b).toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `))+'("'+e+'", '+n+"))",s.FUNCTION_CALL]},d.lists_split=function(e,t){let i=t.valueToCode(e,"INPUT",s.MEMBER);if(t=t.valueToCode(e,"DELIM",s.NONE)||"''","SPLIT"===(e=e.getFieldValue("MODE")))i||(i="''"),e="split";else if("JOIN"===e)i||(i="[]"),e="join";else throw Error("Unknown mode: "+e);return[i+"."+e+"("+t+")",s.FUNCTION_CALL]};var $={};$.controls_if=n,$.controls_ifelse=n,$.logic_boolean=function(e,t){return["TRUE"===e.getFieldValue("BOOL")?"true":"false",s.ATOMIC]},$.logic_compare=function(e,t){let i={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[e.getFieldValue("OP")],n="=="===i||"!="===i?s.EQUALITY:s.RELATIONAL;return[(t.valueToCode(e,"A",n)||"0")+" "+i+" "+(e=t.valueToCode(e,"B",n)||"0"),n]},$.logic_negate=function(e,t){let i=s.LOGICAL_NOT;return["!"+(t.valueToCode(e,"BOOL",i)||"true"),i]},$.logic_null=function(e,t){return["null",s.ATOMIC]},$.logic_operation=function(e,t){let i="AND"===e.getFieldValue("OP")?"&&":"||",n="&&"===i?s.LOGICAL_AND:s.LOGICAL_OR,o=t.valueToCode(e,"A",n);return e=t.valueToCode(e,"B",n),o||e?(t="&&"===i?"true":"false",o||(o=t),e||(e=t)):e=o="false",[o+" "+i+" "+e,n]},$.logic_ternary=function(e,t){let i=t.valueToCode(e,"IF",s.CONDITIONAL)||"false";return[i+" ? "+(t.valueToCode(e,"THEN",s.CONDITIONAL)||"null")+" : "+(e=t.valueToCode(e,"ELSE",s.CONDITIONAL)||"null"),s.CONDITIONAL]};var I={};I.controls_flow_statements=function(e,t){let s="";if(t.STATEMENT_PREFIX&&(s+=t.injectId(t.STATEMENT_PREFIX,e)),t.STATEMENT_SUFFIX&&(s+=t.injectId(t.STATEMENT_SUFFIX,e)),t.STATEMENT_PREFIX){let i=e.getSurroundLoop();i&&!i.suppressPrefixSuffix&&(s+=t.injectId(t.STATEMENT_PREFIX,i))}switch(e.getFieldValue("FLOW")){case"BREAK":return s+"break;\n";case"CONTINUE":return s+"continue;\n"}throw Error("Unknown flow statement.")},I.controls_for=function(e,t){var n=t.getVariableName(e.getFieldValue("VAR")),o=t.valueToCode(e,"FROM",s.ASSIGNMENT)||"0",r=t.valueToCode(e,"TO",s.ASSIGNMENT)||"0";let l=t.valueToCode(e,"BY",s.ASSIGNMENT)||"1",_=t.statementToCode(e,"DO");if(_=t.addLoopTrap(_,e),i.isNumber$$module$build$src$core$utils$string(o)&&i.isNumber$$module$build$src$core$utils$string(r)&&i.isNumber$$module$build$src$core$utils$string(l))t=Number(o)<=Number(r),e="for ("+n+" = "+o+"; "+n+(t?" <= ":" >= ")+r+"; "+n,e=(1===(n=Math.abs(Number(l)))?e+(t?"++":"--"):e+(t?" += ":" -= ")+n)+(") {\n"+_)+"}\n";else{e="";let s=o;o.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(o)||(e+="var "+(s=t.nameDB_.getDistinctName(n+"_start",i.NameType$$module$build$src$core$names.VARIABLE))+" = "+o+";\n"),o=r,r.match(/^\w+$/)||i.isNumber$$module$build$src$core$utils$string(r)||(e+="var "+(o=t.nameDB_.getDistinctName(n+"_end",i.NameType$$module$build$src$core$names.VARIABLE))+" = "+r+";\n"),e+="var "+(r=t.nameDB_.getDistinctName(n+"_inc",i.NameType$$module$build$src$core$names.VARIABLE))+" = ",e=(e=(i.isNumber$$module$build$src$core$utils$string(l)?e+(Math.abs(Number(l))+";\n"):e+"Math.abs("+l+");\n")+("if ("+s+" > "+o)+") {\n"+(t.INDENT+r+" = -"+r)+";\n")+"}\nfor ("+(n+" = "+s+"; "+r+" >= 0 ? "+n+" <= "+o+" : "+n+" >= "+o+"; "+n+" += "+r+") {\n")+_+"}\n"}return e},I.controls_forEach=function(e,t){let n=t.getVariableName(e.getFieldValue("VAR"));var o=t.valueToCode(e,"LIST",s.ASSIGNMENT)||"[]";let r=t.statementToCode(e,"DO");r=t.addLoopTrap(r,e),e="";let l=o;return o.match(/^\w+$/)||(e+="var "+(l=t.nameDB_.getDistinctName(n+"_list",i.NameType$$module$build$src$core$names.VARIABLE))+" = "+o+";\n"),o=t.nameDB_.getDistinctName(n+"_index",i.NameType$$module$build$src$core$names.VARIABLE),r=t.INDENT+n+" = "+l+"["+o+"];\n"+r,e+("for (var "+o+" in "+l+") {\n")+r+"}\n"},I.controls_repeat=o,I.controls_repeat_ext=o,I.controls_whileUntil=function(e,t){let i="UNTIL"===e.getFieldValue("MODE"),n=t.valueToCode(e,"BOOL",i?s.LOGICAL_NOT:s.NONE)||"false",o=t.statementToCode(e,"DO");return o=t.addLoopTrap(o,e),i&&(n="!"+n),"while ("+n+") {\n"+o+"}\n"};var O={};O.math_arithmetic=function(e,t){var i={ADD:[" + ",s.ADDITION],MINUS:[" - ",s.SUBTRACTION],MULTIPLY:[" * ",s.MULTIPLICATION],DIVIDE:[" / ",s.DIVISION],POWER:[null,s.NONE]}[e.getFieldValue("OP")];let n=i[0];i=i[1];let o=t.valueToCode(e,"A",i)||"0";return e=t.valueToCode(e,"B",i)||"0",n?[o+n+e,i]:["Math.pow("+o+", "+e+")",s.FUNCTION_CALL]},O.math_atan2=function(e,t){let i=t.valueToCode(e,"X",s.NONE)||"0";return["Math.atan2("+(t.valueToCode(e,"Y",s.NONE)||"0")+", "+i+") / Math.PI * 180",s.DIVISION]},O.math_change=function(e,t){let i=t.valueToCode(e,"DELTA",s.ADDITION)||"0";return(e=t.getVariableName(e.getFieldValue("VAR")))+" = (typeof "+e+" === 'number' ? "+e+" : 0) + "+i+";\n"},O.math_constant=function(e,t){return({PI:["Math.PI",s.MEMBER],E:["Math.E",s.MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",s.DIVISION],SQRT2:["Math.SQRT2",s.MEMBER],SQRT1_2:["Math.SQRT1_2",s.MEMBER],INFINITY:["Infinity",s.ATOMIC]})[e.getFieldValue("CONSTANT")]},O.math_constrain=function(e,t){let i=t.valueToCode(e,"VALUE",s.NONE)||"0";return["Math.min(Math.max("+i+", "+(t.valueToCode(e,"LOW",s.NONE)||"0")+"), "+(e=t.valueToCode(e,"HIGH",s.NONE)||"Infinity")+")",s.FUNCTION_CALL]},O.math_modulo=function(e,t){return[(t.valueToCode(e,"DIVIDEND",s.MODULUS)||"0")+" % "+(e=t.valueToCode(e,"DIVISOR",s.MODULUS)||"0"),s.MODULUS]},O.math_number=function(e,t){return[String(e=Number(e.getFieldValue("NUM"))),0<=e?s.ATOMIC:s.UNARY_NEGATION]},O.math_number_property=function(e,t){var i={EVEN:[" % 2 === 0",s.MODULUS,s.EQUALITY],ODD:[" % 2 === 1",s.MODULUS,s.EQUALITY],WHOLE:[" % 1 === 0",s.MODULUS,s.EQUALITY],POSITIVE:[" > 0",s.RELATIONAL,s.RELATIONAL],NEGATIVE:[" < 0",s.RELATIONAL,s.RELATIONAL],DIVISIBLE_BY:[null,s.MODULUS,s.EQUALITY],PRIME:[null,s.NONE,s.FUNCTION_CALL]};let n=e.getFieldValue("PROPERTY"),[o,r,l]=i[n];return i=t.valueToCode(e,"NUMBER_TO_CHECK",r)||"0",[e="PRIME"===n?t.provideFunction_("mathIsPrime",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+i+")":"DIVISIBLE_BY"===n?i+" % "+(e=t.valueToCode(e,"DIVISOR",s.MODULUS)||"0")+" === 0":i+o,l]},O.math_on_list=function(e,t){var i=e.getFieldValue("OP");switch(i){case"SUM":e=(t.valueToCode(e,"LIST",s.MEMBER)||"[]")+".reduce(function(x, y) {return x + y;}, 0)";break;case"MIN":e="Math.min.apply(null, "+(e=t.valueToCode(e,"LIST",s.NONE)||"[]")+")";break;case"MAX":e="Math.max.apply(null, "+(e=t.valueToCode(e,"LIST",s.NONE)||"[]")+")";break;case"AVERAGE":e=(i=t.provideFunction_("mathMean",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  return myList.reduce(function(x, y) {return x + y;}, 0) / myList.length;
}
`))+"("+(e=t.valueToCode(e,"LIST",s.NONE)||"[]")+")";break;case"MEDIAN":e=(i=t.provideFunction_("mathMedian",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`))+"("+(e=t.valueToCode(e,"LIST",s.NONE)||"[]")+")";break;case"MODE":e=(i=t.provideFunction_("mathModes",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
      modes.push(counts[j][0]);
    }
  }
  return modes;
}
`))+"("+(e=t.valueToCode(e,"LIST",s.NONE)||"[]")+")";break;case"STD_DEV":e=(i=t.provideFunction_("mathStandardDeviation",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance /= n;
  return Math.sqrt(variance);
}
`))+"("+(e=t.valueToCode(e,"LIST",s.NONE)||"[]")+")";break;case"RANDOM":e=(i=t.provideFunction_("mathRandomList",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`))+"("+(e=t.valueToCode(e,"LIST",s.NONE)||"[]")+")";break;default:throw Error("Unknown operator: "+i)}return[e,s.FUNCTION_CALL]},O.math_random_float=function(e,t){return["Math.random()",s.FUNCTION_CALL]},O.math_random_int=function(e,t){let i=t.valueToCode(e,"FROM",s.NONE)||"0";return e=t.valueToCode(e,"TO",s.NONE)||"0",[t.provideFunction_("mathRandomInt",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+i+", "+e+")",s.FUNCTION_CALL]},O.math_round=r,O.math_single=r,O.math_trig=r;var p={};p.procedures_callnoreturn=function(e,t){return t.forBlock.procedures_callreturn(e,t)[0]+";\n"},p.procedures_callreturn=function(e,t){let i=t.getProcedureName(e.getFieldValue("NAME")),n=[],o=e.getVars();for(let i=0;i<o.length;i++)n[i]=t.valueToCode(e,"ARG"+i,s.NONE)||"null";return[i+"("+n.join(", ")+")",s.FUNCTION_CALL]},p.procedures_defnoreturn=l,p.procedures_defreturn=l,p.procedures_ifreturn=function(e,t){let i="if ("+(t.valueToCode(e,"CONDITION",s.NONE)||"false")+") {\n";return t.STATEMENT_SUFFIX&&(i+=t.prefixLines(t.injectId(t.STATEMENT_SUFFIX,e),t.INDENT)),e.hasReturnValue_?(e=t.valueToCode(e,"VALUE",s.NONE)||"null",i+=t.INDENT+"return "+e+";\n"):i+=t.INDENT+"return;\n",i+"}\n"};var m=/^\s*'([^']|\\')*'\s*$/,g=function(e){return m.test(e)?[e,s.ATOMIC]:["String("+e+")",s.FUNCTION_CALL]},L=function(e,t,s){return"FIRST"===t?"0":"FROM_END"===t?e+".length - 1 - "+s:"LAST"===t?e+".length - 1":s},R={};R.text=function(e,t){return[t.quote_(e.getFieldValue("TEXT")),s.ATOMIC]},R.text_append=function(e,t){return t.getVariableName(e.getFieldValue("VAR"))+" += "+g(e=t.valueToCode(e,"TEXT",s.NONE)||"''")[0]+";\n"},R.text_changeCase=function(e,t){let i={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[e.getFieldValue("CASE")];return e=t.valueToCode(e,"TEXT",i?s.MEMBER:s.NONE)||"''",[i?e+i:t.provideFunction_("textToTitleCase",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+e+")",s.FUNCTION_CALL]},R.text_charAt=function(e,t){let i=e.getFieldValue("WHERE")||"FROM_START",n=t.valueToCode(e,"VALUE","RANDOM"===i?s.NONE:s.MEMBER)||"''";switch(i){case"FIRST":return[n+".charAt(0)",s.FUNCTION_CALL];case"LAST":return[n+".slice(-1)",s.FUNCTION_CALL];case"FROM_START":return[n+".charAt("+(e=t.getAdjusted(e,"AT"))+")",s.FUNCTION_CALL];case"FROM_END":return[n+".slice("+(e=t.getAdjusted(e,"AT",1,!0))+").charAt(0)",s.FUNCTION_CALL];case"RANDOM":return[t.provideFunction_("textRandomLetter",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+n+")",s.FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},R.text_count=function(e,t){let i=t.valueToCode(e,"TEXT",s.NONE)||"''";return e=t.valueToCode(e,"SUB",s.NONE)||"''",[t.provideFunction_("textCount",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+i+", "+e+")",s.FUNCTION_CALL]},R.text_getSubstring=function(e,t){var i={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};let n=e.getFieldValue("WHERE1"),o=e.getFieldValue("WHERE2");var r="FROM_END"!==n&&"LAST"!==n&&"FROM_END"!==o&&"LAST"!==o,l=t.valueToCode(e,"STRING",r?s.MEMBER:s.NONE)||"''";if("FIRST"===n&&"LAST"===o)return[l,s.NONE];if(l.match(/^'?\w+'?$/)||r){switch(n){case"FROM_START":i=t.getAdjusted(e,"AT1");break;case"FROM_END":i=l+".length - "+(i=t.getAdjusted(e,"AT1",1,!1,s.SUBTRACTION));break;case"FIRST":i="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(o){case"FROM_START":t=t.getAdjusted(e,"AT2",1);break;case"FROM_END":t=l+".length - "+(t=t.getAdjusted(e,"AT2",0,!1,s.SUBTRACTION));break;case"LAST":t=l+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}l=l+".slice("+i+", "+t+")"}else r=t.getAdjusted(e,"AT1"),e=t.getAdjusted(e,"AT2"),l=t.provideFunction_("subsequence"+i[n]+i[o],`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(sequence${"FROM_END"===n||"FROM_START"===n?", at1":""}${"FROM_END"===o||"FROM_START"===o?", at2":""}) {
  var start = ${L("sequence",n,"at1")};
  var end = ${L("sequence",o,"at2")} + 1;
  return sequence.slice(start, end);
}
`)+"("+l+("FROM_END"===n||"FROM_START"===n?", "+r:"")+("FROM_END"===o||"FROM_START"===o?", "+e:"")+")";return[l,s.FUNCTION_CALL]},R.text_indexOf=function(e,t){let i="FIRST"===e.getFieldValue("END")?"indexOf":"lastIndexOf",n=t.valueToCode(e,"FIND",s.NONE)||"''";return t=(t.valueToCode(e,"VALUE",s.MEMBER)||"''")+"."+i+"("+n+")",e.workspace.options.oneBasedIndex?[t+" + 1",s.ADDITION]:[t,s.FUNCTION_CALL]},R.text_isEmpty=function(e,t){return["!"+(t.valueToCode(e,"VALUE",s.MEMBER)||"''")+".length",s.LOGICAL_NOT]},R.text_join=function(e,t){switch(e.itemCount_){case 0:return["''",s.ATOMIC];case 1:return g(e=t.valueToCode(e,"ADD0",s.NONE)||"''");case 2:var i=t.valueToCode(e,"ADD0",s.NONE)||"''";return e=t.valueToCode(e,"ADD1",s.NONE)||"''",[g(i)[0]+" + "+g(e)[0],s.ADDITION];default:i=Array(e.itemCount_);for(let n=0;n<e.itemCount_;n++)i[n]=t.valueToCode(e,"ADD"+n,s.NONE)||"''";return["["+i.join(",")+"].join('')",s.FUNCTION_CALL]}},R.text_length=function(e,t){return[(t.valueToCode(e,"VALUE",s.MEMBER)||"''")+".length",s.MEMBER]},R.text_print=function(e,t){return"window.alert("+(t.valueToCode(e,"TEXT",s.NONE)||"''")+");\n"},R.text_prompt=_,R.text_prompt_ext=_,R.text_replace=function(e,t){let i=t.valueToCode(e,"TEXT",s.NONE)||"''",n=t.valueToCode(e,"FROM",s.NONE)||"''";return e=t.valueToCode(e,"TO",s.NONE)||"''",[t.provideFunction_("textReplace",`
function ${t.FUNCTION_NAME_PLACEHOLDER_}(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+i+", "+n+", "+e+")",s.FUNCTION_CALL]},R.text_reverse=function(e,t){return[(t.valueToCode(e,"TEXT",s.MEMBER)||"''")+".split('').reverse().join('')",s.FUNCTION_CALL]},R.text_trim=function(e,t){let i={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[e.getFieldValue("MODE")];return[(t.valueToCode(e,"TEXT",s.MEMBER)||"''")+i,s.FUNCTION_CALL]};var h={};h.variables_get=u,h.variables_set=T;var S={};S.variables_get_dynamic=u,S.variables_set_dynamic=T;var A=new a,M=Object.assign({},d,$,I,O,p,R,h,S);for(let e in M)A.forBlock[e]=M[e];var N={};return N.JavascriptGenerator=a,N.Order=s,N.javascriptGenerator=A,N.__namespace__=i,N},i=[s(1615)],void 0!==(n=o.apply(t,i))&&(e.exports=n)}}]);